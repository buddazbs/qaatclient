import{r as Qt,a as Ht,g as es}from"./vendor-CRB3T2We.js";import{r as y,R as ts,T as K,C as M,F as _,I as q,b as W,c as fe,B as $,s as R,A as ye,d as Z,e as P,S as ue,f as U,g as St,h as Ot,i as Ct,j as k,k as pe,l as me,m as ss,n as Tt,o as At,P as is,p as Rt,q as ns,t as rs,u as _t,v as as,w as Mt,U as us,x as ls,y as Pe,L as te,z as cs,D as os,E as hs,M as ds,G as fs,H as gs,J as ps,K as ms,N as xs,O as vs,Q as ys,V as bs,W as js,X as Es,Y as Le,Z as ws}from"./antd-BHZq3qhh.js";import{c as Me,a as Ss,u as Os,b as Cs,P as Ts}from"./redux-DMib5smq.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();var je={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e;function As(){if($e)return Q;$e=1;var t=Qt(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(u,l,o){var h,d={},f=null,p=null;o!==void 0&&(f=""+o),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)i.call(l,h)&&!r.hasOwnProperty(h)&&(d[h]=l[h]);if(u&&u.defaultProps)for(h in l=u.defaultProps,l)d[h]===void 0&&(d[h]=l[h]);return{$$typeof:e,type:u,key:f,ref:p,props:d,_owner:n.current}}return Q.Fragment=s,Q.jsx=a,Q.jsxs=a,Q}var Ne;function Rs(){return Ne||(Ne=1,je.exports=As()),je.exports}var c=Rs(),le={},qe;function _s(){if(qe)return le;qe=1;var t=Ht();return le.createRoot=t.createRoot,le.hydrateRoot=t.hydrateRoot,le}var Ms=_s();const Fs=es(Ms),Is=()=>{try{const t=sessionStorage.getItem("auth");if(t){const{user:e,token:s}=JSON.parse(t);return{user:e,token:s,isAuthenticated:!0,loading:!1,error:null}}}catch{}return{user:null,token:null,isAuthenticated:!1,loading:!1,error:null}},Bs=Is(),Ft=Me({name:"@@app/auth",initialState:Bs,reducers:{loginStart:t=>{t.loading=!0,t.error=null},loginSuccess:(t,e)=>{t.loading=!1,t.isAuthenticated=!0,t.user=e.payload.user,t.token=e.payload.token,sessionStorage.setItem("auth",JSON.stringify({user:e.payload.user,token:e.payload.token}))},loginFailure:(t,e)=>{t.loading=!1,t.error=e.payload},logout:t=>{t.user=null,t.token=null,t.isAuthenticated=!1,sessionStorage.removeItem("auth")},updateProfile:(t,e)=>{t.user=e.payload;const s=sessionStorage.getItem("auth");if(s){const i=JSON.parse(s);i.user=e.payload,sessionStorage.setItem("auth",JSON.stringify(i))}}}}),{loginStart:zs,loginSuccess:Ds,loginFailure:Ue,logout:ks}=Ft.actions,Ps=Ft.reducer,Ls={isDarkMode:localStorage.getItem("theme")==="dark"},It=Me({name:"@@app/theme",initialState:Ls,reducers:{toggleTheme:t=>{t.isDarkMode=!t.isDarkMode,localStorage.setItem("theme",t.isDarkMode?"dark":"light")},setTheme:(t,e)=>{t.isDarkMode=e.payload,localStorage.setItem("theme",e.payload?"dark":"light")}}}),{toggleTheme:$s}=It.actions,Ns=It.reducer,qs={markets:[],testRuns:[],testResults:[],loading:!1,error:null},Bt=Me({name:"@@app/autotests",initialState:qs,reducers:{setMarkets:(t,e)=>{t.markets=e.payload},setTestRuns:(t,e)=>{t.testRuns=e.payload},setTestResults:(t,e)=>{t.testResults=e.payload},addTestRun:(t,e)=>{t.testRuns.unshift(e.payload)},updateTestRun:(t,e)=>{const s=t.testRuns.findIndex(i=>i.id===e.payload.id);s!==-1&&(t.testRuns[s]=e.payload)},addTestResult:(t,e)=>{t.testResults.unshift(e.payload)},updateTestResult:(t,e)=>{const s=t.testResults.findIndex(i=>i.id===e.payload.id);s!==-1&&(t.testResults[s]=e.payload)},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload}}}),{setMarkets:Us,setTestRuns:We,setTestResults:Ve,addTestRun:Ws,updateTestRun:Vs,updateTestResult:Ge}=Bt.actions,Gs=Bt.reducer,Xs=Ss({reducer:{auth:Ps,theme:Ns,autotests:Gs}});/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function se(){return se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},se.apply(this,arguments)}var G;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(G||(G={}));const Xe="popstate";function Ys(t){t===void 0&&(t={});function e(i,n){let{pathname:r,search:a,hash:u}=i.location;return Ae("",{pathname:r,search:a,hash:u},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(i,n){return typeof n=="string"?n:zt(n)}return Ks(e,s,null,t)}function D(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fe(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zs(){return Math.random().toString(36).substr(2,8)}function Ye(t,e){return{usr:t.state,key:t.key,idx:e}}function Ae(t,e,s,i){return s===void 0&&(s=null),se({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ie(e):e,{state:s,key:e&&e.key||i||Zs()})}function zt(t){let{pathname:e="/",search:s="",hash:i=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ie(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Ks(t,e,s,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:r=!1}=i,a=n.history,u=G.Pop,l=null,o=h();o==null&&(o=0,a.replaceState(se({},a.state,{idx:o}),""));function h(){return(a.state||{idx:null}).idx}function d(){u=G.Pop;let x=h(),v=x==null?null:x-o;o=x,l&&l({action:u,location:m.location,delta:v})}function f(x,v){u=G.Push;let E=Ae(m.location,x,v);o=h()+1;let b=Ye(E,o),j=m.createHref(E);try{a.pushState(b,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(j)}r&&l&&l({action:u,location:m.location,delta:1})}function p(x,v){u=G.Replace;let E=Ae(m.location,x,v);o=h();let b=Ye(E,o),j=m.createHref(E);a.replaceState(b,"",j),r&&l&&l({action:u,location:m.location,delta:0})}function g(x){let v=n.location.origin!=="null"?n.location.origin:n.location.href,E=typeof x=="string"?x:zt(x);return E=E.replace(/ $/,"%20"),D(v,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,v)}let m={get action(){return u},get location(){return t(n,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(Xe,d),l=x,()=>{n.removeEventListener(Xe,d),l=null}},createHref(x){return e(n,x)},createURL:g,encodeLocation(x){let v=g(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(x){return a.go(x)}};return m}var Ze;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ze||(Ze={}));function Js(t,e,s){return s===void 0&&(s="/"),Qs(t,e,s)}function Qs(t,e,s,i){let n=typeof e=="string"?ie(e):e,r=Pt(n.pathname||"/",s);if(r==null)return null;let a=Dt(t);Hs(a);let u=null;for(let l=0;u==null&&l<a.length;++l){let o=hi(r);u=li(a[l],o)}return u}function Dt(t,e,s,i){e===void 0&&(e=[]),s===void 0&&(s=[]),i===void 0&&(i="");let n=(r,a,u)=>{let l={relativePath:u===void 0?r.path||"":u,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(D(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let o=X([i,l.relativePath]),h=s.concat(l);r.children&&r.children.length>0&&(D(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),Dt(r.children,e,h,o)),!(r.path==null&&!r.index)&&e.push({path:o,score:ai(o,r.index),routesMeta:h})};return t.forEach((r,a)=>{var u;if(r.path===""||!((u=r.path)!=null&&u.includes("?")))n(r,a);else for(let l of kt(r.path))n(r,a,l)}),e}function kt(t){let e=t.split("/");if(e.length===0)return[];let[s,...i]=e,n=s.endsWith("?"),r=s.replace(/\?$/,"");if(i.length===0)return n?[r,""]:[r];let a=kt(i.join("/")),u=[];return u.push(...a.map(l=>l===""?r:[r,l].join("/"))),n&&u.push(...a),u.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hs(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:ui(e.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const ei=/^:[\w-]+$/,ti=3,si=2,ii=1,ni=10,ri=-2,Ke=t=>t==="*";function ai(t,e){let s=t.split("/"),i=s.length;return s.some(Ke)&&(i+=ri),e&&(i+=si),s.filter(n=>!Ke(n)).reduce((n,r)=>n+(ei.test(r)?ti:r===""?ii:ni),i)}function ui(t,e){return t.length===e.length&&t.slice(0,-1).every((i,n)=>i===e[n])?t[t.length-1]-e[e.length-1]:0}function li(t,e,s){let{routesMeta:i}=t,n={},r="/",a=[];for(let u=0;u<i.length;++u){let l=i[u],o=u===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",d=ci({path:l.relativePath,caseSensitive:l.caseSensitive,end:o},h),f=l.route;if(!d)return null;Object.assign(n,d.params),a.push({params:n,pathname:X([r,d.pathname]),pathnameBase:mi(X([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=X([r,d.pathnameBase]))}return a}function ci(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=oi(t.path,t.caseSensitive,t.end),n=e.match(s);if(!n)return null;let r=n[0],a=r.replace(/(.)\/+$/,"$1"),u=n.slice(1);return{params:i.reduce((o,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let m=u[d]||"";a=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const g=u[d];return p&&!g?o[f]=void 0:o[f]=(g||"").replace(/%2F/g,"/"),o},{}),pathname:r,pathnameBase:a,pattern:t}}function oi(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Fe(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,l)=>(i.push({paramName:u,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function hi(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fe(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}const di=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fi=t=>di.test(t);function gi(t,e){e===void 0&&(e="/");let{pathname:s,search:i="",hash:n=""}=typeof t=="string"?ie(t):t,r;if(s)if(fi(s))r=s;else{if(s.includes("//")){let a=s;s=s.replace(/\/\/+/g,"/"),Fe(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+s))}s.startsWith("/")?r=Je(s.substring(1),"/"):r=Je(s,e)}else r=e;return{pathname:r,search:xi(i),hash:vi(n)}}function Je(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Ee(t,e,s,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pi(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Lt(t,e){let s=pi(t);return e?s.map((i,n)=>n===s.length-1?i.pathname:i.pathnameBase):s.map(i=>i.pathnameBase)}function $t(t,e,s,i){i===void 0&&(i=!1);let n;typeof t=="string"?n=ie(t):(n=se({},t),D(!n.pathname||!n.pathname.includes("?"),Ee("?","pathname","search",n)),D(!n.pathname||!n.pathname.includes("#"),Ee("#","pathname","hash",n)),D(!n.search||!n.search.includes("#"),Ee("#","search","hash",n)));let r=t===""||n.pathname==="",a=r?"/":n.pathname,u;if(a==null)u=s;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;n.pathname=f.join("/")}u=d>=0?e[d]:"/"}let l=gi(n,u),o=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&s.endsWith("/");return!l.pathname.endsWith("/")&&(o||h)&&(l.pathname+="/"),l}const X=t=>t.join("/").replace(/\/\/+/g,"/"),mi=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xi=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vi=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yi(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nt=["post","put","patch","delete"];new Set(Nt);const bi=["get",...Nt];new Set(bi);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},xe.apply(this,arguments)}const Ie=y.createContext(null),ji=y.createContext(null),ne=y.createContext(null),Be=y.createContext(null),Y=y.createContext({outlet:null,matches:[],isDataRoute:!1}),qt=y.createContext(null);function re(){return y.useContext(Be)!=null}function be(){return re()||D(!1),y.useContext(Be).location}function Ut(t){y.useContext(ne).static||y.useLayoutEffect(t)}function ae(){let{isDataRoute:t}=y.useContext(Y);return t?Bi():Ei()}function Ei(){re()||D(!1);let t=y.useContext(Ie),{basename:e,future:s,navigator:i}=y.useContext(ne),{matches:n}=y.useContext(Y),{pathname:r}=be(),a=JSON.stringify(Lt(n,s.v7_relativeSplatPath)),u=y.useRef(!1);return Ut(()=>{u.current=!0}),y.useCallback(function(o,h){if(h===void 0&&(h={}),!u.current)return;if(typeof o=="number"){i.go(o);return}let d=$t(o,JSON.parse(a),r,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:X([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,a,r,t])}function wi(t,e){return Si(t)}function Si(t,e,s,i){re()||D(!1);let{navigator:n}=y.useContext(ne),{matches:r}=y.useContext(Y),a=r[r.length-1],u=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let o=be(),h;h=o;let d=h.pathname||"/",f=d;if(l!=="/"){let m=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=Js(t,{pathname:f});return Ri(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},u,m.params),pathname:X([l,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:X([l,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),r,s,i)}function Oi(){let t=Ii(),e=yi(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),s?y.createElement("pre",{style:n},s):null,null)}const Ci=y.createElement(Oi,null);class Ti extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?y.createElement(Y.Provider,{value:this.props.routeContext},y.createElement(qt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ai(t){let{routeContext:e,match:s,children:i}=t,n=y.useContext(Ie);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),y.createElement(Y.Provider,{value:e},i)}function Ri(t,e,s,i){var n;if(e===void 0&&(e=[]),s===void 0&&(s=null),i===void 0&&(i=null),t==null){var r;if(!s)return null;if(s.errors)t=s.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,u=(n=s)==null?void 0:n.errors;if(u!=null){let h=a.findIndex(d=>d.route.id&&(u==null?void 0:u[d.route.id])!==void 0);h>=0||D(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,o=-1;if(s&&i&&i.v7_partialHydration)for(let h=0;h<a.length;h++){let d=a[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(o=h),d.route.id){let{loaderData:f,errors:p}=s,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,o>=0?a=a.slice(0,o+1):a=[a[0]];break}}}return a.reduceRight((h,d,f)=>{let p,g=!1,m=null,x=null;s&&(p=u&&d.route.id?u[d.route.id]:void 0,m=d.route.errorElement||Ci,l&&(o<0&&f===0?(zi("route-fallback"),g=!0,x=null):o===f&&(g=!0,x=d.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),E=()=>{let b;return p?b=m:g?b=x:d.route.Component?b=y.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,y.createElement(Ai,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:s!=null},children:b})};return s&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?y.createElement(Ti,{location:s.location,revalidation:s.revalidation,component:m,error:p,children:E(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):E()},null)}var Wt=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Wt||{}),Vt=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Vt||{});function _i(t){let e=y.useContext(Ie);return e||D(!1),e}function Mi(t){let e=y.useContext(ji);return e||D(!1),e}function Fi(t){let e=y.useContext(Y);return e||D(!1),e}function Gt(t){let e=Fi(),s=e.matches[e.matches.length-1];return s.route.id||D(!1),s.route.id}function Ii(){var t;let e=y.useContext(qt),s=Mi(),i=Gt();return e!==void 0?e:(t=s.errors)==null?void 0:t[i]}function Bi(){let{router:t}=_i(Wt.UseNavigateStable),e=Gt(Vt.UseNavigateStable),s=y.useRef(!1);return Ut(()=>{s.current=!0}),y.useCallback(function(n,r){r===void 0&&(r={}),s.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,xe({fromRouteId:e},r)))},[t,e])}const Qe={};function zi(t,e,s){Qe[t]||(Qe[t]=!0)}function Di(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ge(t){let{to:e,replace:s,state:i,relative:n}=t;re()||D(!1);let{future:r,static:a}=y.useContext(ne),{matches:u}=y.useContext(Y),{pathname:l}=be(),o=ae(),h=$t(e,Lt(u,r.v7_relativeSplatPath),l,n==="path"),d=JSON.stringify(h);return y.useEffect(()=>o(JSON.parse(d),{replace:s,state:i,relative:n}),[o,d,n,s,i]),null}function ki(t){let{basename:e="/",children:s=null,location:i,navigationType:n=G.Pop,navigator:r,static:a=!1,future:u}=t;re()&&D(!1);let l=e.replace(/^\/*/,"/"),o=y.useMemo(()=>({basename:l,navigator:r,static:a,future:xe({v7_relativeSplatPath:!1},u)}),[l,u,r,a]);typeof i=="string"&&(i=ie(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:g="default"}=i,m=y.useMemo(()=>{let x=Pt(h,l);return x==null?null:{location:{pathname:x,search:d,hash:f,state:p,key:g},navigationType:n}},[l,h,d,f,p,g,n]);return m==null?null:y.createElement(ne.Provider,{value:o},y.createElement(Be.Provider,{children:s,value:m}))}new Promise(()=>{});/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Pi="6";try{window.__reactRouterVersion=Pi}catch{}const Li="startTransition",He=ts[Li];function $i(t){let{basename:e,children:s,future:i,window:n}=t,r=y.useRef();r.current==null&&(r.current=Ys({window:n,v5Compat:!0}));let a=r.current,[u,l]=y.useState({action:a.action,location:a.location}),{v7_startTransition:o}=i||{},h=y.useCallback(d=>{o&&He?He(()=>l(d)):l(d)},[l,o]);return y.useLayoutEffect(()=>a.listen(h),[a,h]),y.useEffect(()=>Di(i),[i]),y.createElement(ki,{basename:e,children:s,location:u.location,navigationType:u.action,navigator:a,future:i})}var et;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(et||(et={}));var tt;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tt||(tt={}));const ze=Os,De=Cs,Xt=()=>{const t=ze(),e=De(i=>i.theme.isDarkMode);return y.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light")},[e]),{isDarkTheme:e,toggleTheme:()=>{t($s())}}};var Ni=function(t,e,s,i){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{o(i.next(h))}catch(d){a(d)}}function l(h){try{o(i.throw(h))}catch(d){a(d)}}function o(h){h.done?r(h.value):n(h.value).then(u,l)}o((i=i.apply(t,e||[])).next())})};const qi=[{id:"1",username:"admin",email:"admin@example.com",role:"admin",avatar:"https://api.dicebear.com/7.x/miniavs/svg?seed=1"},{id:"2",username:"user",email:"user@example.com",role:"user",avatar:"https://api.dicebear.com/7.x/miniavs/svg?seed=2"}],V=()=>{const t=ze(),{user:e,isAuthenticated:s,loading:i,error:n}=De(u=>u.auth);return{user:e,isAuth:s,loading:i,error:n,login:u=>Ni(void 0,void 0,void 0,function*(){t(zs());try{yield new Promise(o=>setTimeout(o,500));const l=qi.find(o=>o.username===u.username&&u.password==="password");if(l){const o=`mock-jwt-token-${l.id}`;return t(Ds({user:l,token:o})),!0}else return t(Ue("Неверное имя пользователя или пароль")),!1}catch(l){const o=l instanceof Error?l.message:"Произошла неизвестная ошибка";return t(Ue(o)),!1}}),logout:()=>{t(ks())}}};function ee(t){let e=t[0],s=t[1],i=t[2];return Math.sqrt(e*e+s*s+i*i)}function Re(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ui(t,e,s,i){return t[0]=e,t[1]=s,t[2]=i,t}function st(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function it(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t}function Wi(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t}function Vi(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t}function we(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Gi(t,e){let s=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(s*s+i*i+n*n)}function Xi(t,e){let s=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return s*s+i*i+n*n}function nt(t){let e=t[0],s=t[1],i=t[2];return e*e+s*s+i*i}function Yi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Zi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _e(t,e){let s=e[0],i=e[1],n=e[2],r=s*s+i*i+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Yt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rt(t,e,s){let i=e[0],n=e[1],r=e[2],a=s[0],u=s[1],l=s[2];return t[0]=n*l-r*u,t[1]=r*a-i*l,t[2]=i*u-n*a,t}function Ki(t,e,s,i){let n=e[0],r=e[1],a=e[2];return t[0]=n+i*(s[0]-n),t[1]=r+i*(s[1]-r),t[2]=a+i*(s[2]-a),t}function Ji(t,e,s,i,n){const r=Math.exp(-i*n);let a=e[0],u=e[1],l=e[2];return t[0]=s[0]+(a-s[0])*r,t[1]=s[1]+(u-s[1])*r,t[2]=s[2]+(l-s[2])*r,t}function Qi(t,e,s){let i=e[0],n=e[1],r=e[2],a=s[3]*i+s[7]*n+s[11]*r+s[15];return a=a||1,t[0]=(s[0]*i+s[4]*n+s[8]*r+s[12])/a,t[1]=(s[1]*i+s[5]*n+s[9]*r+s[13])/a,t[2]=(s[2]*i+s[6]*n+s[10]*r+s[14])/a,t}function Hi(t,e,s){let i=e[0],n=e[1],r=e[2],a=s[3]*i+s[7]*n+s[11]*r+s[15];return a=a||1,t[0]=(s[0]*i+s[4]*n+s[8]*r)/a,t[1]=(s[1]*i+s[5]*n+s[9]*r)/a,t[2]=(s[2]*i+s[6]*n+s[10]*r)/a,t}function en(t,e,s){let i=e[0],n=e[1],r=e[2];return t[0]=i*s[0]+n*s[3]+r*s[6],t[1]=i*s[1]+n*s[4]+r*s[7],t[2]=i*s[2]+n*s[5]+r*s[8],t}function tn(t,e,s){let i=e[0],n=e[1],r=e[2],a=s[0],u=s[1],l=s[2],o=s[3],h=u*r-l*n,d=l*i-a*r,f=a*n-u*i,p=u*f-l*d,g=l*h-a*f,m=a*d-u*h,x=o*2;return h*=x,d*=x,f*=x,p*=2,g*=2,m*=2,t[0]=i+h+p,t[1]=n+d+g,t[2]=r+f+m,t}const sn=(function(){const t=[0,0,0],e=[0,0,0];return function(s,i){Re(t,s),Re(e,i),_e(t,t),_e(e,e);let n=Yt(t,e);return n>1?0:n<-1?Math.PI:Math.acos(n)}})();function nn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class L extends Array{constructor(e=0,s=e,i=e){return super(e,s,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,s=e,i=e){return e.length?this.copy(e):(Ui(this,e,s,i),this)}copy(e){return Re(this,e),this}add(e,s){return s?st(this,e,s):st(this,this,e),this}sub(e,s){return s?it(this,e,s):it(this,this,e),this}multiply(e){return e.length?Wi(this,this,e):we(this,this,e),this}divide(e){return e.length?Vi(this,this,e):we(this,this,1/e),this}inverse(e=this){return Zi(this,e),this}len(){return ee(this)}distance(e){return e?Gi(this,e):ee(this)}squaredLen(){return nt(this)}squaredDistance(e){return e?Xi(this,e):nt(this)}negate(e=this){return Yi(this,e),this}cross(e,s){return s?rt(this,e,s):rt(this,this,e),this}scale(e){return we(this,this,e),this}normalize(){return _e(this,this),this}dot(e){return Yt(this,e)}equals(e){return nn(this,e)}applyMatrix3(e){return en(this,this,e),this}applyMatrix4(e){return Qi(this,this,e),this}scaleRotateMatrix4(e){return Hi(this,this,e),this}applyQuaternion(e){return tn(this,this,e),this}angle(e){return sn(this,e)}lerp(e,s){return Ki(this,this,e,s),this}smoothLerp(e,s,i){return Ji(this,this,e,s,i),this}clone(){return new L(this[0],this[1],this[2])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}transformDirection(e){const s=this[0],i=this[1],n=this[2];return this[0]=e[0]*s+e[4]*i+e[8]*n,this[1]=e[1]*s+e[5]*i+e[9]*n,this[2]=e[2]*s+e[6]*i+e[10]*n,this.normalize()}}const at=new L;let rn=1,an=1,ut=!1;class un{constructor(e,s={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=s,this.id=rn++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in s)this.addAttribute(i,s[i])}addAttribute(e,s){if(this.attributes[e]=s,s.id=an++,s.size=s.size||1,s.type=s.type||(s.data.constructor===Float32Array?this.gl.FLOAT:s.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),s.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,s.normalized=s.normalized||!1,s.stride=s.stride||0,s.offset=s.offset||0,s.count=s.count||(s.stride?s.data.byteLength/s.stride:s.data.length/s.size),s.divisor=s.instanced||0,s.needsUpdate=!1,s.usage=s.usage||this.gl.STATIC_DRAW,s.buffer||this.updateAttribute(s),s.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==s.count*s.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,s.count*s.divisor);this.instancedCount=s.count*s.divisor}else e==="index"?this.drawRange.count=s.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,s.count))}updateAttribute(e){const s=!e.buffer;s&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),s?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,s){this.drawRange.start=e,this.drawRange.count=s}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((s,{name:i,type:n})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const r=this.attributes[i];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let a=1;n===35674&&(a=2),n===35675&&(a=3),n===35676&&(a=4);const u=r.size/a,l=a===1?0:a*a*4,o=a===1?0:a*4;for(let h=0;h<a;h++)this.gl.vertexAttribPointer(s+h,u,r.type,r.normalized,r.stride+l,r.offset+h*o),this.gl.enableVertexAttribArray(s+h),this.gl.renderer.vertexAttribDivisor(s+h,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:s=this.gl.TRIANGLES}){var n;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((r,{name:a})=>{const u=this.attributes[a];u.needsUpdate&&this.updateAttribute(u)});let i=2;((n=this.attributes.index)==null?void 0:n.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(s,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(s,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(s,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!ut)return console.warn("No position buffer data found to compute bounds"),ut=!0}computeBoundingBox(e){e||(e=this.getPosition());const s=e.data,i=e.size;this.bounds||(this.bounds={min:new L,max:new L,center:new L,scale:new L,radius:1/0});const n=this.bounds.min,r=this.bounds.max,a=this.bounds.center,u=this.bounds.scale;n.set(1/0),r.set(-1/0);for(let l=0,o=s.length;l<o;l+=i){const h=s[l],d=s[l+1],f=s[l+2];n.x=Math.min(h,n.x),n.y=Math.min(d,n.y),n.z=Math.min(f,n.z),r.x=Math.max(h,r.x),r.y=Math.max(d,r.y),r.z=Math.max(f,r.z)}u.sub(r,n),a.add(n,r).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const s=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let n=0;for(let r=0,a=s.length;r<a;r+=i)at.fromArray(s,r),n=Math.max(n,this.bounds.center.squaredDistance(at));this.bounds.radius=Math.sqrt(n)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let ln=1;const lt={};class cn{constructor(e,{vertex:s,fragment:i,uniforms:n={},transparent:r=!1,cullFace:a=e.BACK,frontFace:u=e.CCW,depthTest:l=!0,depthWrite:o=!0,depthFunc:h=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=n,this.id=ln++,s||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=a,this.frontFace=u,this.depthTest=l,this.depthWrite=o,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:s,fragment:i})}setShaders({vertex:e,fragment:s}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${ct(e)}`)),s&&(this.gl.shaderSource(this.fragmentShader,s),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${ct(s)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){let u=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(u,this.gl.getUniformLocation(this.program,u.name));const l=u.name.match(/(\w+)/g);u.uniformName=l[0],u.nameComponents=l.slice(1)}this.attributeLocations=new Map;const n=[],r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const u=this.gl.getActiveAttrib(this.program,a),l=this.gl.getAttribLocation(this.program,u.name);l!==-1&&(n[l]=u.name,this.attributeLocations.set(u,l))}this.attributeOrder=n.join("")}setBlendFunc(e,s,i,n){this.blendFunc.src=e,this.blendFunc.dst=s,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=n,e&&(this.transparent=!0)}setBlendEquation(e,s){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=s}setStencilFunc(e,s,i){this.stencilRef=s,this.stencilFunc.func=e,this.stencilFunc.ref=s,this.stencilFunc.mask=i}setStencilOp(e,s,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=s,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let s=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((n,r)=>{let a=this.uniforms[r.uniformName];for(const u of r.nameComponents){if(!a)break;if(u in a)a=a[u];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return ot(`Active uniform ${r.name} has not been supplied`);if(a&&a.value===void 0)return ot(`${r.name} uniform is missing a value parameter`);if(a.value.texture)return s=s+1,a.value.update(s),Se(this.gl,r.type,n,s);if(a.value.length&&a.value[0].texture){const u=[];return a.value.forEach(l=>{s=s+1,l.update(s),u.push(s)}),Se(this.gl,r.type,n,u)}Se(this.gl,r.type,n,a.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Se(t,e,s,i){i=i.length?on(i):i;const n=t.renderer.state.uniformLocations.get(s);if(i.length)if(n===void 0||n.length!==i.length)t.renderer.state.uniformLocations.set(s,i.slice(0));else{if(hn(n,i))return;n.set?n.set(i):dn(n,i),t.renderer.state.uniformLocations.set(s,n)}else{if(n===i)return;t.renderer.state.uniformLocations.set(s,i)}switch(e){case 5126:return i.length?t.uniform1fv(s,i):t.uniform1f(s,i);case 35664:return t.uniform2fv(s,i);case 35665:return t.uniform3fv(s,i);case 35666:return t.uniform4fv(s,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?t.uniform1iv(s,i):t.uniform1i(s,i);case 35671:case 35667:return t.uniform2iv(s,i);case 35672:case 35668:return t.uniform3iv(s,i);case 35673:case 35669:return t.uniform4iv(s,i);case 35674:return t.uniformMatrix2fv(s,!1,i);case 35675:return t.uniformMatrix3fv(s,!1,i);case 35676:return t.uniformMatrix4fv(s,!1,i)}}function ct(t){let e=t.split(`
`);for(let s=0;s<e.length;s++)e[s]=s+1+": "+e[s];return e.join(`
`)}function on(t){const e=t.length,s=t[0].length;if(s===void 0)return t;const i=e*s;let n=lt[i];n||(lt[i]=n=new Float32Array(i));for(let r=0;r<e;r++)n.set(t[r],r*s);return n}function hn(t,e){if(t.length!==e.length)return!1;for(let s=0,i=t.length;s<i;s++)if(t[s]!==e[s])return!1;return!0}function dn(t,e){for(let s=0,i=t.length;s<i;s++)t[s]=e[s]}let Oe=0;function ot(t){Oe>100||(console.warn(t),Oe++,Oe>100&&console.warn("More than 100 program warnings - stopping logs."))}const Ce=new L;let fn=1;class gn{constructor({canvas:e=document.createElement("canvas"),width:s=300,height:i=150,dpr:n=1,alpha:r=!1,depth:a=!0,stencil:u=!1,antialias:l=!1,premultipliedAlpha:o=!1,preserveDrawingBuffer:h=!1,powerPreference:d="default",autoClear:f=!0,webgl:p=2}={}){const g={alpha:r,depth:a,stencil:u,antialias:l,premultipliedAlpha:o,preserveDrawingBuffer:h,powerPreference:d};this.dpr=n,this.alpha=r,this.color=!0,this.depth=a,this.stencil=u,this.premultipliedAlpha=o,this.autoClear=f,this.id=fn++,p===2&&(this.gl=e.getContext("webgl2",g)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",g)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(s,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,s){this.width=e,this.height=s,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=s*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:s+"px"})}setViewport(e,s,i=0,n=0){this.state.viewport.width===e&&this.state.viewport.height===s||(this.state.viewport.width=e,this.state.viewport.height=s,this.state.viewport.x=i,this.state.viewport.y=n,this.gl.viewport(i,n,e,s))}setScissor(e,s,i=0,n=0){this.gl.scissor(i,n,e,s)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,s,i,n){this.state.blendFunc.src===e&&this.state.blendFunc.dst===s&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===n||(this.state.blendFunc.src=e,this.state.blendFunc.dst=s,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=n,i!==void 0?this.gl.blendFuncSeparate(e,s,i,n):this.gl.blendFunc(e,s))}setBlendEquation(e,s){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===s)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=s,s!==void 0?this.gl.blendEquationSeparate(e,s):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,s,i){this.state.stencilFunc===e&&this.state.stencilRef===s&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=s||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,s||0,i||0))}setStencilOp(e,s,i){this.state.stencilFail===e&&this.state.stencilDepthFail===s&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=s,this.state.stencilDepthPass=i,this.gl.stencilOp(e,s,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:s=null}={}){this.state.framebuffer!==s&&(this.state.framebuffer=s,this.gl.bindFramebuffer(e,s))}getExtension(e,s,i){return s&&this.gl[s]?this.gl[s].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),s?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:e.zDepth!==s.zDepth?e.zDepth-s.zDepth:s.id-e.id}sortTransparent(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.zDepth!==s.zDepth?s.zDepth-e.zDepth:s.id-e.id}sortUI(e,s){return e.renderOrder!==s.renderOrder?e.renderOrder-s.renderOrder:e.program.id!==s.program.id?e.program.id-s.program.id:s.id-e.id}getRenderList({scene:e,camera:s,frustumCull:i,sort:n}){let r=[];if(s&&i&&s.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;a.draw&&(i&&a.frustumCulled&&s&&!s.frustumIntersectsMesh(a)||r.push(a))}),n){const a=[],u=[],l=[];r.forEach(o=>{o.program.transparent?o.program.depthTest?u.push(o):l.push(o):a.push(o),o.zDepth=0,!(o.renderOrder!==0||!o.program.depthTest||!s)&&(o.worldMatrix.getTranslation(Ce),Ce.applyMatrix4(s.projectionViewMatrix),o.zDepth=Ce.z)}),a.sort(this.sortOpaque),u.sort(this.sortTransparent),l.sort(this.sortUI),r=a.concat(u,l)}return r}render({scene:e,camera:s,target:i=null,update:n=!0,sort:r=!0,frustumCull:a=!0,clear:u}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(u||this.autoClear&&u!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),n&&e.updateMatrixWorld(),s&&s.updateMatrixWorld(),this.getRenderList({scene:e,camera:s,frustumCull:a,sort:r}).forEach(o=>{o.draw({camera:s})})}}function pn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function mn(t,e,s,i,n){return t[0]=e,t[1]=s,t[2]=i,t[3]=n,t}function xn(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=s*s+i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=s*a,t[1]=i*a,t[2]=n*a,t[3]=r*a,t}function vn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function yn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function bn(t,e,s){s=s*.5;let i=Math.sin(s);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(s),t}function ht(t,e,s){let i=e[0],n=e[1],r=e[2],a=e[3],u=s[0],l=s[1],o=s[2],h=s[3];return t[0]=i*h+a*u+n*o-r*l,t[1]=n*h+a*l+r*u-i*o,t[2]=r*h+a*o+i*l-n*u,t[3]=a*h-i*u-n*l-r*o,t}function jn(t,e,s){s*=.5;let i=e[0],n=e[1],r=e[2],a=e[3],u=Math.sin(s),l=Math.cos(s);return t[0]=i*l+a*u,t[1]=n*l+r*u,t[2]=r*l-n*u,t[3]=a*l-i*u,t}function En(t,e,s){s*=.5;let i=e[0],n=e[1],r=e[2],a=e[3],u=Math.sin(s),l=Math.cos(s);return t[0]=i*l-r*u,t[1]=n*l+a*u,t[2]=r*l+i*u,t[3]=a*l-n*u,t}function wn(t,e,s){s*=.5;let i=e[0],n=e[1],r=e[2],a=e[3],u=Math.sin(s),l=Math.cos(s);return t[0]=i*l+n*u,t[1]=n*l-i*u,t[2]=r*l+a*u,t[3]=a*l-r*u,t}function Sn(t,e,s,i){let n=e[0],r=e[1],a=e[2],u=e[3],l=s[0],o=s[1],h=s[2],d=s[3],f,p,g,m,x;return p=n*l+r*o+a*h+u*d,p<0&&(p=-p,l=-l,o=-o,h=-h,d=-d),1-p>1e-6?(f=Math.acos(p),g=Math.sin(f),m=Math.sin((1-i)*f)/g,x=Math.sin(i*f)/g):(m=1-i,x=i),t[0]=m*n+x*l,t[1]=m*r+x*o,t[2]=m*a+x*h,t[3]=m*u+x*d,t}function On(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=s*s+i*i+n*n+r*r,u=a?1/a:0;return t[0]=-s*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t}function Cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Tn(t,e){let s=e[0]+e[4]+e[8],i;if(s>0)i=Math.sqrt(s+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[n*3+n]&&(n=2);let r=(n+1)%3,a=(n+2)%3;i=Math.sqrt(e[n*3+n]-e[r*3+r]-e[a*3+a]+1),t[n]=.5*i,i=.5/i,t[3]=(e[r*3+a]-e[a*3+r])*i,t[r]=(e[r*3+n]+e[n*3+r])*i,t[a]=(e[a*3+n]+e[n*3+a])*i}return t}function An(t,e,s="YXZ"){let i=Math.sin(e[0]*.5),n=Math.cos(e[0]*.5),r=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),u=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return s==="XYZ"?(t[0]=i*a*l+n*r*u,t[1]=n*r*l-i*a*u,t[2]=n*a*u+i*r*l,t[3]=n*a*l-i*r*u):s==="YXZ"?(t[0]=i*a*l+n*r*u,t[1]=n*r*l-i*a*u,t[2]=n*a*u-i*r*l,t[3]=n*a*l+i*r*u):s==="ZXY"?(t[0]=i*a*l-n*r*u,t[1]=n*r*l+i*a*u,t[2]=n*a*u+i*r*l,t[3]=n*a*l-i*r*u):s==="ZYX"?(t[0]=i*a*l-n*r*u,t[1]=n*r*l+i*a*u,t[2]=n*a*u-i*r*l,t[3]=n*a*l+i*r*u):s==="YZX"?(t[0]=i*a*l+n*r*u,t[1]=n*r*l+i*a*u,t[2]=n*a*u-i*r*l,t[3]=n*a*l-i*r*u):s==="XZY"&&(t[0]=i*a*l-n*r*u,t[1]=n*r*l-i*a*u,t[2]=n*a*u+i*r*l,t[3]=n*a*l+i*r*u),t}const Rn=pn,_n=mn,Mn=vn,Fn=xn;class In extends Array{constructor(e=0,s=0,i=0,n=1){super(e,s,i,n),this.onChange=()=>{},this._target=this;const r=["0","1","2","3"];return new Proxy(this,{set(a,u){const l=Reflect.set(...arguments);return l&&r.includes(u)&&a.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return yn(this._target),this.onChange(),this}set(e,s,i,n){return e.length?this.copy(e):(_n(this._target,e,s,i,n),this.onChange(),this)}rotateX(e){return jn(this._target,this._target,e),this.onChange(),this}rotateY(e){return En(this._target,this._target,e),this.onChange(),this}rotateZ(e){return wn(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return On(this._target,e),this.onChange(),this}conjugate(e=this._target){return Cn(this._target,e),this.onChange(),this}copy(e){return Rn(this._target,e),this.onChange(),this}normalize(e=this._target){return Fn(this._target,e),this.onChange(),this}multiply(e,s){return s?ht(this._target,e,s):ht(this._target,this._target,e),this.onChange(),this}dot(e){return Mn(this._target,e)}fromMatrix3(e){return Tn(this._target,e),this.onChange(),this}fromEuler(e,s){return An(this._target,e,e.order),s||this.onChange(),this}fromAxisAngle(e,s){return bn(this._target,e,s),this.onChange(),this}slerp(e,s){return Sn(this._target,this._target,e,s),this.onChange(),this}fromArray(e,s=0){return this._target[0]=e[s],this._target[1]=e[s+1],this._target[2]=e[s+2],this._target[3]=e[s+3],this.onChange(),this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e}}const Bn=1e-6;function zn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Dn(t,e,s,i,n,r,a,u,l,o,h,d,f,p,g,m,x){return t[0]=e,t[1]=s,t[2]=i,t[3]=n,t[4]=r,t[5]=a,t[6]=u,t[7]=l,t[8]=o,t[9]=h,t[10]=d,t[11]=f,t[12]=p,t[13]=g,t[14]=m,t[15]=x,t}function kn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pn(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=e[4],u=e[5],l=e[6],o=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],x=e[14],v=e[15],E=s*u-i*a,b=s*l-n*a,j=s*o-r*a,w=i*l-n*u,S=i*o-r*u,C=n*o-r*l,F=h*m-d*g,I=h*x-f*g,T=h*v-p*g,B=d*x-f*m,A=d*v-p*m,z=f*v-p*x,O=E*z-b*A+j*B+w*T-S*I+C*F;return O?(O=1/O,t[0]=(u*z-l*A+o*B)*O,t[1]=(n*A-i*z-r*B)*O,t[2]=(m*C-x*S+v*w)*O,t[3]=(f*S-d*C-p*w)*O,t[4]=(l*T-a*z-o*I)*O,t[5]=(s*z-n*T+r*I)*O,t[6]=(x*j-g*C-v*b)*O,t[7]=(h*C-f*j+p*b)*O,t[8]=(a*A-u*T+o*F)*O,t[9]=(i*T-s*A-r*F)*O,t[10]=(g*S-m*j+v*E)*O,t[11]=(d*j-h*S-p*E)*O,t[12]=(u*I-a*B-l*F)*O,t[13]=(s*B-i*I+n*F)*O,t[14]=(m*b-g*w-x*E)*O,t[15]=(h*w-d*b+f*E)*O,t):null}function Zt(t){let e=t[0],s=t[1],i=t[2],n=t[3],r=t[4],a=t[5],u=t[6],l=t[7],o=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],m=t[14],x=t[15],v=e*a-s*r,E=e*u-i*r,b=e*l-n*r,j=s*u-i*a,w=s*l-n*a,S=i*l-n*u,C=o*g-h*p,F=o*m-d*p,I=o*x-f*p,T=h*m-d*g,B=h*x-f*g,A=d*x-f*m;return v*A-E*B+b*T+j*I-w*F+S*C}function dt(t,e,s){let i=e[0],n=e[1],r=e[2],a=e[3],u=e[4],l=e[5],o=e[6],h=e[7],d=e[8],f=e[9],p=e[10],g=e[11],m=e[12],x=e[13],v=e[14],E=e[15],b=s[0],j=s[1],w=s[2],S=s[3];return t[0]=b*i+j*u+w*d+S*m,t[1]=b*n+j*l+w*f+S*x,t[2]=b*r+j*o+w*p+S*v,t[3]=b*a+j*h+w*g+S*E,b=s[4],j=s[5],w=s[6],S=s[7],t[4]=b*i+j*u+w*d+S*m,t[5]=b*n+j*l+w*f+S*x,t[6]=b*r+j*o+w*p+S*v,t[7]=b*a+j*h+w*g+S*E,b=s[8],j=s[9],w=s[10],S=s[11],t[8]=b*i+j*u+w*d+S*m,t[9]=b*n+j*l+w*f+S*x,t[10]=b*r+j*o+w*p+S*v,t[11]=b*a+j*h+w*g+S*E,b=s[12],j=s[13],w=s[14],S=s[15],t[12]=b*i+j*u+w*d+S*m,t[13]=b*n+j*l+w*f+S*x,t[14]=b*r+j*o+w*p+S*v,t[15]=b*a+j*h+w*g+S*E,t}function Ln(t,e,s){let i=s[0],n=s[1],r=s[2],a,u,l,o,h,d,f,p,g,m,x,v;return e===t?(t[12]=e[0]*i+e[4]*n+e[8]*r+e[12],t[13]=e[1]*i+e[5]*n+e[9]*r+e[13],t[14]=e[2]*i+e[6]*n+e[10]*r+e[14],t[15]=e[3]*i+e[7]*n+e[11]*r+e[15]):(a=e[0],u=e[1],l=e[2],o=e[3],h=e[4],d=e[5],f=e[6],p=e[7],g=e[8],m=e[9],x=e[10],v=e[11],t[0]=a,t[1]=u,t[2]=l,t[3]=o,t[4]=h,t[5]=d,t[6]=f,t[7]=p,t[8]=g,t[9]=m,t[10]=x,t[11]=v,t[12]=a*i+h*n+g*r+e[12],t[13]=u*i+d*n+m*r+e[13],t[14]=l*i+f*n+x*r+e[14],t[15]=o*i+p*n+v*r+e[15]),t}function $n(t,e,s){let i=s[0],n=s[1],r=s[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Nn(t,e,s,i){let n=i[0],r=i[1],a=i[2],u=Math.hypot(n,r,a),l,o,h,d,f,p,g,m,x,v,E,b,j,w,S,C,F,I,T,B,A,z,O,J;return Math.abs(u)<Bn?null:(u=1/u,n*=u,r*=u,a*=u,l=Math.sin(s),o=Math.cos(s),h=1-o,d=e[0],f=e[1],p=e[2],g=e[3],m=e[4],x=e[5],v=e[6],E=e[7],b=e[8],j=e[9],w=e[10],S=e[11],C=n*n*h+o,F=r*n*h+a*l,I=a*n*h-r*l,T=n*r*h-a*l,B=r*r*h+o,A=a*r*h+n*l,z=n*a*h+r*l,O=r*a*h-n*l,J=a*a*h+o,t[0]=d*C+m*F+b*I,t[1]=f*C+x*F+j*I,t[2]=p*C+v*F+w*I,t[3]=g*C+E*F+S*I,t[4]=d*T+m*B+b*A,t[5]=f*T+x*B+j*A,t[6]=p*T+v*B+w*A,t[7]=g*T+E*B+S*A,t[8]=d*z+m*O+b*J,t[9]=f*z+x*O+j*J,t[10]=p*z+v*O+w*J,t[11]=g*z+E*O+S*J,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function qn(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Kt(t,e){let s=e[0],i=e[1],n=e[2],r=e[4],a=e[5],u=e[6],l=e[8],o=e[9],h=e[10];return t[0]=Math.hypot(s,i,n),t[1]=Math.hypot(r,a,u),t[2]=Math.hypot(l,o,h),t}function Un(t){let e=t[0],s=t[1],i=t[2],n=t[4],r=t[5],a=t[6],u=t[8],l=t[9],o=t[10];const h=e*e+s*s+i*i,d=n*n+r*r+a*a,f=u*u+l*l+o*o;return Math.sqrt(Math.max(h,d,f))}const Jt=(function(){const t=[1,1,1];return function(e,s){let i=t;Kt(i,s);let n=1/i[0],r=1/i[1],a=1/i[2],u=s[0]*n,l=s[1]*r,o=s[2]*a,h=s[4]*n,d=s[5]*r,f=s[6]*a,p=s[8]*n,g=s[9]*r,m=s[10]*a,x=u+d+m,v=0;return x>0?(v=Math.sqrt(x+1)*2,e[3]=.25*v,e[0]=(f-g)/v,e[1]=(p-o)/v,e[2]=(l-h)/v):u>d&&u>m?(v=Math.sqrt(1+u-d-m)*2,e[3]=(f-g)/v,e[0]=.25*v,e[1]=(l+h)/v,e[2]=(p+o)/v):d>m?(v=Math.sqrt(1+d-u-m)*2,e[3]=(p-o)/v,e[0]=(l+h)/v,e[1]=.25*v,e[2]=(f+g)/v):(v=Math.sqrt(1+m-u-d)*2,e[3]=(l-h)/v,e[0]=(p+o)/v,e[1]=(f+g)/v,e[2]=.25*v),e}})();function Wn(t,e,s,i){let n=ee([t[0],t[1],t[2]]);const r=ee([t[4],t[5],t[6]]),a=ee([t[8],t[9],t[10]]);Zt(t)<0&&(n=-n),s[0]=t[12],s[1]=t[13],s[2]=t[14];const l=t.slice(),o=1/n,h=1/r,d=1/a;l[0]*=o,l[1]*=o,l[2]*=o,l[4]*=h,l[5]*=h,l[6]*=h,l[8]*=d,l[9]*=d,l[10]*=d,Jt(e,l),i[0]=n,i[1]=r,i[2]=a}function Vn(t,e,s,i){const n=t,r=e[0],a=e[1],u=e[2],l=e[3],o=r+r,h=a+a,d=u+u,f=r*o,p=r*h,g=r*d,m=a*h,x=a*d,v=u*d,E=l*o,b=l*h,j=l*d,w=i[0],S=i[1],C=i[2];return n[0]=(1-(m+v))*w,n[1]=(p+j)*w,n[2]=(g-b)*w,n[3]=0,n[4]=(p-j)*S,n[5]=(1-(f+v))*S,n[6]=(x+E)*S,n[7]=0,n[8]=(g+b)*C,n[9]=(x-E)*C,n[10]=(1-(f+m))*C,n[11]=0,n[12]=s[0],n[13]=s[1],n[14]=s[2],n[15]=1,n}function Gn(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=s+s,u=i+i,l=n+n,o=s*a,h=i*a,d=i*u,f=n*a,p=n*u,g=n*l,m=r*a,x=r*u,v=r*l;return t[0]=1-d-g,t[1]=h+v,t[2]=f-x,t[3]=0,t[4]=h-v,t[5]=1-o-g,t[6]=p+m,t[7]=0,t[8]=f+x,t[9]=p-m,t[10]=1-o-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xn(t,e,s,i,n){let r=1/Math.tan(e/2),a=1/(i-n);return t[0]=r/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*a,t[15]=0,t}function Yn(t,e,s,i,n,r,a){let u=1/(e-s),l=1/(i-n),o=1/(r-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*o,t[11]=0,t[12]=(e+s)*u,t[13]=(n+i)*l,t[14]=(a+r)*o,t[15]=1,t}function Zn(t,e,s,i){let n=e[0],r=e[1],a=e[2],u=i[0],l=i[1],o=i[2],h=n-s[0],d=r-s[1],f=a-s[2],p=h*h+d*d+f*f;p===0?f=1:(p=1/Math.sqrt(p),h*=p,d*=p,f*=p);let g=l*f-o*d,m=o*h-u*f,x=u*d-l*h;return p=g*g+m*m+x*x,p===0&&(o?u+=1e-6:l?o+=1e-6:l+=1e-6,g=l*f-o*d,m=o*h-u*f,x=u*d-l*h,p=g*g+m*m+x*x),p=1/Math.sqrt(p),g*=p,m*=p,x*=p,t[0]=g,t[1]=m,t[2]=x,t[3]=0,t[4]=d*x-f*m,t[5]=f*g-h*x,t[6]=h*m-d*g,t[7]=0,t[8]=h,t[9]=d,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=a,t[15]=1,t}function ft(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t}function gt(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t}function Kn(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t}class ve extends Array{constructor(e=1,s=0,i=0,n=0,r=0,a=1,u=0,l=0,o=0,h=0,d=1,f=0,p=0,g=0,m=0,x=1){return super(e,s,i,n,r,a,u,l,o,h,d,f,p,g,m,x),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,s,i,n,r,a,u,l,o,h,d,f,p,g,m,x){return e.length?this.copy(e):(Dn(this,e,s,i,n,r,a,u,l,o,h,d,f,p,g,m,x),this)}translate(e,s=this){return Ln(this,s,e),this}rotate(e,s,i=this){return Nn(this,i,e,s),this}scale(e,s=this){return $n(this,s,typeof e=="number"?[e,e,e]:e),this}add(e,s){return s?ft(this,e,s):ft(this,this,e),this}sub(e,s){return s?gt(this,e,s):gt(this,this,e),this}multiply(e,s){return e.length?s?dt(this,e,s):dt(this,this,e):Kn(this,this,e),this}identity(){return kn(this),this}copy(e){return zn(this,e),this}fromPerspective({fov:e,aspect:s,near:i,far:n}={}){return Xn(this,e,s,i,n),this}fromOrthogonal({left:e,right:s,bottom:i,top:n,near:r,far:a}){return Yn(this,e,s,i,n,r,a),this}fromQuaternion(e){return Gn(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Pn(this,e),this}compose(e,s,i){return Vn(this,e,s,i),this}decompose(e,s,i){return Wn(this,e,s,i),this}getRotation(e){return Jt(e,this),this}getTranslation(e){return qn(e,this),this}getScaling(e){return Kt(e,this),this}getMaxScaleOnAxis(){return Un(this)}lookAt(e,s,i){return Zn(this,e,s,i),this}determinant(){return Zt(this)}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this[2]=e[s+2],this[3]=e[s+3],this[4]=e[s+4],this[5]=e[s+5],this[6]=e[s+6],this[7]=e[s+7],this[8]=e[s+8],this[9]=e[s+9],this[10]=e[s+10],this[11]=e[s+11],this[12]=e[s+12],this[13]=e[s+13],this[14]=e[s+14],this[15]=e[s+15],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e[s+3]=this[3],e[s+4]=this[4],e[s+5]=this[5],e[s+6]=this[6],e[s+7]=this[7],e[s+8]=this[8],e[s+9]=this[9],e[s+10]=this[10],e[s+11]=this[11],e[s+12]=this[12],e[s+13]=this[13],e[s+14]=this[14],e[s+15]=this[15],e}}function Jn(t,e,s="YXZ"){return s==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):s==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):s==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):s==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):s==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):s==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const pt=new ve;class Qn extends Array{constructor(e=0,s=e,i=e,n="YXZ"){super(e,s,i),this.order=n,this.onChange=()=>{},this._target=this;const r=["0","1","2"];return new Proxy(this,{set(a,u){const l=Reflect.set(...arguments);return l&&r.includes(u)&&a.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,s=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=s,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,s=this.order){return Jn(this._target,e,s),this.onChange(),this}fromQuaternion(e,s=this.order,i){return pt.fromQuaternion(e),this._target.fromRotationMatrix(pt,s),i||this.onChange(),this}fromArray(e,s=0){return this._target[0]=e[s],this._target[1]=e[s+1],this._target[2]=e[s+2],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e[s+2]=this[2],e}}class Hn{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new ve,this.worldMatrix=new ve,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new L,this.quaternion=new In,this.scale=new L(1),this.rotation=new Qn,this.up=new L(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,s=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,s&&e&&e.addChild(this,!1)}addChild(e,s=!0){~this.children.indexOf(e)||this.children.push(e),s&&e.setParent(this,!1)}removeChild(e,s=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),s&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let s=0,i=this.children.length;s<i;s++)this.children[s].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let s=0,i=this.children.length;s<i;s++)this.children[s].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,s=!1){s?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}function er(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function tr(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=s+s,u=i+i,l=n+n,o=s*a,h=i*a,d=i*u,f=n*a,p=n*u,g=n*l,m=r*a,x=r*u,v=r*l;return t[0]=1-d-g,t[3]=h-v,t[6]=f+x,t[1]=h+v,t[4]=1-o-g,t[7]=p-m,t[2]=f-x,t[5]=p+m,t[8]=1-o-d,t}function sr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ir(t,e,s,i,n,r,a,u,l,o){return t[0]=e,t[1]=s,t[2]=i,t[3]=n,t[4]=r,t[5]=a,t[6]=u,t[7]=l,t[8]=o,t}function nr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function rr(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=e[4],u=e[5],l=e[6],o=e[7],h=e[8],d=h*a-u*o,f=-h*r+u*l,p=o*r-a*l,g=s*d+i*f+n*p;return g?(g=1/g,t[0]=d*g,t[1]=(-h*i+n*o)*g,t[2]=(u*i-n*a)*g,t[3]=f*g,t[4]=(h*s-n*l)*g,t[5]=(-u*s+n*r)*g,t[6]=p*g,t[7]=(-o*s+i*l)*g,t[8]=(a*s-i*r)*g,t):null}function mt(t,e,s){let i=e[0],n=e[1],r=e[2],a=e[3],u=e[4],l=e[5],o=e[6],h=e[7],d=e[8],f=s[0],p=s[1],g=s[2],m=s[3],x=s[4],v=s[5],E=s[6],b=s[7],j=s[8];return t[0]=f*i+p*a+g*o,t[1]=f*n+p*u+g*h,t[2]=f*r+p*l+g*d,t[3]=m*i+x*a+v*o,t[4]=m*n+x*u+v*h,t[5]=m*r+x*l+v*d,t[6]=E*i+b*a+j*o,t[7]=E*n+b*u+j*h,t[8]=E*r+b*l+j*d,t}function ar(t,e,s){let i=e[0],n=e[1],r=e[2],a=e[3],u=e[4],l=e[5],o=e[6],h=e[7],d=e[8],f=s[0],p=s[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=a,t[4]=u,t[5]=l,t[6]=f*i+p*a+o,t[7]=f*n+p*u+h,t[8]=f*r+p*l+d,t}function ur(t,e,s){let i=e[0],n=e[1],r=e[2],a=e[3],u=e[4],l=e[5],o=e[6],h=e[7],d=e[8],f=Math.sin(s),p=Math.cos(s);return t[0]=p*i+f*a,t[1]=p*n+f*u,t[2]=p*r+f*l,t[3]=p*a-f*i,t[4]=p*u-f*n,t[5]=p*l-f*r,t[6]=o,t[7]=h,t[8]=d,t}function lr(t,e,s){let i=s[0],n=s[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function cr(t,e){let s=e[0],i=e[1],n=e[2],r=e[3],a=e[4],u=e[5],l=e[6],o=e[7],h=e[8],d=e[9],f=e[10],p=e[11],g=e[12],m=e[13],x=e[14],v=e[15],E=s*u-i*a,b=s*l-n*a,j=s*o-r*a,w=i*l-n*u,S=i*o-r*u,C=n*o-r*l,F=h*m-d*g,I=h*x-f*g,T=h*v-p*g,B=d*x-f*m,A=d*v-p*m,z=f*v-p*x,O=E*z-b*A+j*B+w*T-S*I+C*F;return O?(O=1/O,t[0]=(u*z-l*A+o*B)*O,t[1]=(l*T-a*z-o*I)*O,t[2]=(a*A-u*T+o*F)*O,t[3]=(n*A-i*z-r*B)*O,t[4]=(s*z-n*T+r*I)*O,t[5]=(i*T-s*A-r*F)*O,t[6]=(m*C-x*S+v*w)*O,t[7]=(x*j-g*C-v*b)*O,t[8]=(g*S-m*j+v*E)*O,t):null}class or extends Array{constructor(e=1,s=0,i=0,n=0,r=1,a=0,u=0,l=0,o=1){return super(e,s,i,n,r,a,u,l,o),this}set(e,s,i,n,r,a,u,l,o){return e.length?this.copy(e):(ir(this,e,s,i,n,r,a,u,l,o),this)}translate(e,s=this){return ar(this,s,e),this}rotate(e,s=this){return ur(this,s,e),this}scale(e,s=this){return lr(this,s,e),this}multiply(e,s){return s?mt(this,e,s):mt(this,this,e),this}identity(){return nr(this),this}copy(e){return sr(this,e),this}fromMatrix4(e){return er(this,e),this}fromQuaternion(e){return tr(this,e),this}fromBasis(e,s,i){return this.set(e[0],e[1],e[2],s[0],s[1],s[2],i[0],i[1],i[2]),this}inverse(e=this){return rr(this,e),this}getNormalMatrix(e){return cr(this,e),this}}let hr=0;class dr extends Hn{constructor(e,{geometry:s,program:i,mode:n=e.TRIANGLES,frustumCulled:r=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=hr++,this.geometry=s,this.program=i,this.mode=n,this.frustumCulled=r,this.renderOrder=a,this.modelViewMatrix=new ve,this.normalMatrix=new or,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let s=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:s}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}function fr(t,e){return t[0]=e[0],t[1]=e[1],t}function gr(t,e,s){return t[0]=e,t[1]=s,t}function xt(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t}function vt(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t}function pr(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t}function mr(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t}function Te(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t}function xr(t,e){var s=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(s*s+i*i)}function vr(t,e){var s=e[0]-t[0],i=e[1]-t[1];return s*s+i*i}function yt(t){var e=t[0],s=t[1];return Math.sqrt(e*e+s*s)}function yr(t){var e=t[0],s=t[1];return e*e+s*s}function br(t,e){return t[0]=-e[0],t[1]=-e[1],t}function jr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Er(t,e){var s=e[0],i=e[1],n=s*s+i*i;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function wr(t,e){return t[0]*e[0]+t[1]*e[1]}function bt(t,e){return t[0]*e[1]-t[1]*e[0]}function Sr(t,e,s,i){var n=e[0],r=e[1];return t[0]=n+i*(s[0]-n),t[1]=r+i*(s[1]-r),t}function Or(t,e,s,i,n){const r=Math.exp(-i*n);let a=e[0],u=e[1];return t[0]=s[0]+(a-s[0])*r,t[1]=s[1]+(u-s[1])*r,t}function Cr(t,e,s){var i=e[0],n=e[1];return t[0]=s[0]*i+s[3]*n+s[6],t[1]=s[1]*i+s[4]*n+s[7],t}function Tr(t,e,s){let i=e[0],n=e[1];return t[0]=s[0]*i+s[4]*n+s[12],t[1]=s[1]*i+s[5]*n+s[13],t}function Ar(t,e){return t[0]===e[0]&&t[1]===e[1]}class ke extends Array{constructor(e=0,s=e){return super(e,s),this}get x(){return this[0]}get y(){return this[1]}set x(e){this[0]=e}set y(e){this[1]=e}set(e,s=e){return e.length?this.copy(e):(gr(this,e,s),this)}copy(e){return fr(this,e),this}add(e,s){return s?xt(this,e,s):xt(this,this,e),this}sub(e,s){return s?vt(this,e,s):vt(this,this,e),this}multiply(e){return e.length?pr(this,this,e):Te(this,this,e),this}divide(e){return e.length?mr(this,this,e):Te(this,this,1/e),this}inverse(e=this){return jr(this,e),this}len(){return yt(this)}distance(e){return e?xr(this,e):yt(this)}squaredLen(){return this.squaredDistance()}squaredDistance(e){return e?vr(this,e):yr(this)}negate(e=this){return br(this,e),this}cross(e,s){return s?bt(e,s):bt(this,e)}scale(e){return Te(this,this,e),this}normalize(){return Er(this,this),this}dot(e){return wr(this,e)}equals(e){return Ar(this,e)}applyMatrix3(e){return Cr(this,this,e),this}applyMatrix4(e){return Tr(this,this,e),this}lerp(e,s){return Sr(this,this,e,s),this}smoothLerp(e,s,i){return Or(this,this,e,s,i),this}clone(){return new ke(this[0],this[1])}fromArray(e,s=0){return this[0]=e[s],this[1]=e[s+1],this}toArray(e=[],s=0){return e[s]=this[0],e[s+1]=this[1],e}}class Rr extends un{constructor(e,{attributes:s={}}={}){Object.assign(s,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,s)}}const _r=`
attribute vec2 position;
void main(){gl_Position=vec4(position,0.0,1.0);}
`,Mr=`
#ifdef GL_ES
precision lowp float;
#endif
uniform vec2 uResolution;
uniform float uTime;
uniform float uHueShift;
uniform float uNoise;
uniform float uScan;
uniform float uScanFreq;
uniform float uWarp;
#define iTime uTime
#define iResolution uResolution

vec4 buf[8];
float rand(vec2 c){return fract(sin(dot(c,vec2(12.9898,78.233)))*43758.5453);}

mat3 rgb2yiq=mat3(0.299,0.587,0.114,0.596,-0.274,-0.322,0.211,-0.523,0.312);
mat3 yiq2rgb=mat3(1.0,0.956,0.621,1.0,-0.272,-0.647,1.0,-1.106,1.703);

vec3 hueShiftRGB(vec3 col,float deg){
    vec3 yiq=rgb2yiq*col;
    float rad=radians(deg);
    float cosh=cos(rad),sinh=sin(rad);
    vec3 yiqShift=vec3(yiq.x,yiq.y*cosh-yiq.z*sinh,yiq.y*sinh+yiq.z*cosh);
    return clamp(yiq2rgb*yiqShift,0.0,1.0);
}

vec4 sigmoid(vec4 x){return 1./(1.+exp(-x));}

vec4 cppn_fn(vec2 coordinate,float in0,float in1,float in2){
    buf[6]=vec4(coordinate.x,coordinate.y,0.3948333106474662+in0,0.36+in1);
    buf[7]=vec4(0.14+in2,sqrt(coordinate.x*coordinate.x+coordinate.y*coordinate.y),0.,0.);
    buf[0]=mat4(vec4(6.5404263,-3.6126034,0.7590882,-1.13613),vec4(2.4582713,3.1660357,1.2219609,0.06276096),vec4(-5.478085,-6.159632,1.8701609,-4.7742867),vec4(6.039214,-5.542865,-0.90925294,3.251348))*buf[6]+mat4(vec4(0.8473259,-5.722911,3.975766,1.6522468),vec4(-0.24321538,0.5839259,-1.7661959,-5.350116),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(0.21808943,1.1243913,-1.7969975,5.0294676);
    buf[1]=mat4(vec4(-3.3522482,-6.0612736,0.55641043,-4.4719114),vec4(0.8631464,1.7432913,5.643898,1.6106541),vec4(2.4941394,-3.5012043,1.7184316,6.357333),vec4(3.310376,8.209261,1.1355612,-1.165539))*buf[6]+mat4(vec4(5.24046,-13.034365,0.009859298,15.870829),vec4(2.987511,3.129433,-0.89023495,-1.6822904),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-5.9457836,-6.573602,-0.8812491,1.5436668);
    buf[0]=sigmoid(buf[0]);buf[1]=sigmoid(buf[1]);
    buf[2]=mat4(vec4(-15.219568,8.095543,-2.429353,-1.9381982),vec4(-5.951362,4.3115187,2.6393783,1.274315),vec4(-7.3145227,6.7297835,5.2473326,5.9411426),vec4(5.0796127,8.979051,-1.7278991,-1.158976))*buf[6]+mat4(vec4(-11.967154,-11.608155,6.1486754,11.237008),vec4(2.124141,-6.263192,-1.7050359,-0.7021966),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-4.17164,-3.2281182,-4.576417,-3.6401186);
    buf[3]=mat4(vec4(3.1832156,-13.738922,1.879223,3.233465),vec4(0.64300746,12.768129,1.9141049,0.50990224),vec4(-0.049295485,4.4807224,1.4733979,1.801449),vec4(5.0039253,13.000481,3.3991797,-4.5561905))*buf[6]+mat4(vec4(-0.1285731,7.720628,-3.1425676,4.742367),vec4(0.6393625,3.714393,-0.8108378,-0.39174938),vec4(0.,0.,0.,0.),vec4(0.,0.,0.,0.))*buf[7]+vec4(-1.1811101,-21.621881,0.7851888,1.2329718);
    buf[2]=sigmoid(buf[2]);buf[3]=sigmoid(buf[3]);
    buf[4]=mat4(vec4(5.214916,-7.183024,2.7228765,2.6592617),vec4(-5.601878,-25.3591,4.067988,0.4602802),vec4(-10.57759,24.286327,21.102104,37.546658),vec4(4.3024497,-1.9625226,2.3458803,-1.372816))*buf[0]+mat4(vec4(-17.6526,-10.507558,2.2587414,12.462782),vec4(6.265566,-502.75443,-12.642513,0.9112289),vec4(-10.983244,20.741234,-9.701768,-0.7635988),vec4(5.383626,1.4819539,-4.1911616,-4.8444734))*buf[1]+mat4(vec4(12.785233,-16.345072,-0.39901125,1.7955981),vec4(-30.48365,-1.8345358,1.4542528,-1.1118771),vec4(19.872723,-7.337935,-42.941723,-98.52709),vec4(8.337645,-2.7312303,-2.2927687,-36.142323))*buf[2]+mat4(vec4(-16.298317,3.5471997,-0.44300047,-9.444417),vec4(57.5077,-35.609753,16.163465,-4.1534753),vec4(-0.07470326,-3.8656476,-7.0901804,3.1523974),vec4(-12.559385,-7.077619,1.490437,-0.8211543))*buf[3]+vec4(-7.67914,15.927437,1.3207729,-1.6686112);
    buf[5]=mat4(vec4(-1.4109162,-0.372762,-3.770383,-21.367174),vec4(-6.2103205,-9.35908,0.92529047,8.82561),vec4(11.460242,-22.348068,13.625772,-18.693201),vec4(-0.3429052,-3.9905605,-2.4626114,-0.45033523))*buf[0]+mat4(vec4(7.3481627,-4.3661838,-6.3037653,-3.868115),vec4(1.5462853,6.5488915,1.9701879,-0.58291394),vec4(6.5858274,-2.2180402,3.7127688,-1.3730392),vec4(-5.7973905,10.134961,-2.3395722,-5.965605))*buf[1]+mat4(vec4(-2.5132585,-6.6685553,-1.4029363,-0.16285264),vec4(-0.37908727,0.53738135,4.389061,-1.3024765),vec4(-0.70647055,2.0111287,-5.1659346,-3.728635),vec4(-13.562562,10.487719,-0.9173751,-2.6487076))*buf[2]+mat4(vec4(-8.645013,6.5546675,-6.3944063,-5.5933375),vec4(-0.57783127,-1.077275,36.91025,5.736769),vec4(14.283112,3.7146652,7.1452246,-4.5958776),vec4(2.7192075,3.6021907,-4.366337,-2.3653464))*buf[3]+vec4(-5.9000807,-4.329569,1.2427121,8.59503);
    buf[4]=sigmoid(buf[4]);buf[5]=sigmoid(buf[5]);
    buf[6]=mat4(vec4(-1.61102,0.7970257,1.4675229,0.20917463),vec4(-28.793737,-7.1390953,1.5025433,4.656581),vec4(-10.94861,39.66238,0.74318546,-10.095605),vec4(-0.7229728,-1.5483948,0.7301322,2.1687684))*buf[0]+mat4(vec4(3.2547753,21.489103,-1.0194173,-3.3100595),vec4(-3.7316632,-3.3792162,-7.223193,-0.23685838),vec4(13.1804495,0.7916005,5.338587,5.687114),vec4(-4.167605,-17.798311,-6.815736,-1.6451967))*buf[1]+mat4(vec4(0.604885,-7.800309,-7.213122,-2.741014),vec4(-3.522382,-0.12359311,-0.5258442,0.43852118),vec4(9.6752825,-22.853785,2.062431,0.099892326),vec4(-4.3196306,-17.730087,2.5184598,5.30267))*buf[2]+mat4(vec4(-6.545563,-15.790176,-6.0438633,-5.415399),vec4(-43.591583,28.551912,-16.00161,18.84728),vec4(4.212382,8.394307,3.0958717,8.657522),vec4(-5.0237565,-4.450633,-4.4768,-5.5010443))*buf[3]+mat4(vec4(1.6985557,-67.05806,6.897715,1.9004834),vec4(1.8680354,2.3915145,2.5231109,4.081538),vec4(11.158006,1.7294737,2.0738268,7.386411),vec4(-4.256034,-306.24686,8.258898,-17.132736))*buf[4]+mat4(vec4(1.6889864,-4.5852966,3.8534803,-6.3482175),vec4(1.3543309,-1.2640043,9.932754,2.9079645),vec4(-5.2770967,0.07150358,-0.13962056,3.3269649),vec4(28.34703,-4.918278,6.1044083,4.085355))*buf[5]+vec4(6.6818056,12.522166,-3.7075126,-4.104386);
    buf[7]=mat4(vec4(-8.265602,-4.7027016,5.098234,0.7509808),vec4(8.6507845,-17.15949,16.51939,-8.884479),vec4(-4.036479,-2.3946867,-2.6055532,-1.9866527),vec4(-2.2167742,-1.8135649,-5.9759874,4.8846445))*buf[0]+mat4(vec4(6.7790847,3.5076547,-2.8191125,-2.7028968),vec4(-5.743024,-0.27844876,1.4958696,-5.0517144),vec4(13.122226,15.735168,-2.9397483,-4.101023),vec4(-14.375265,-5.030483,-6.2599335,2.9848232))*buf[1]+mat4(vec4(4.0950394,-0.94011575,-5.674733,4.755022),vec4(4.3809423,4.8310084,1.7425908,-3.437416),vec4(2.117492,0.16342592,-104.56341,16.949184),vec4(-5.22543,-2.994248,3.8350096,-1.9364246))*buf[2]+mat4(vec4(-5.900337,1.7946124,-13.604192,-3.8060522),vec4(6.6583457,31.911177,25.164474,91.81147),vec4(11.840538,4.1503043,-0.7314397,6.768467),vec4(-6.3967767,4.034772,6.1714606,-0.32874924))*buf[3]+mat4(vec4(3.4992442,-196.91893,-8.923708,2.8142626),vec4(3.4806502,-3.1846354,5.1725626,5.1804223),vec4(-2.4009497,15.585794,1.2863957,2.0252278),vec4(-71.25271,-62.441242,-8.138444,0.50670296))*buf[4]+mat4(vec4(-12.291733,-11.176166,-7.3474145,4.390294),vec4(10.805477,5.6337385,-0.9385842,-4.7348723),vec4(-12.869276,-7.039391,5.3029537,7.5436664),vec4(1.4593618,8.91898,3.5101583,5.840625))*buf[5]+vec4(2.2415268,-6.705987,-0.98861027,-2.117676);
    buf[6]=sigmoid(buf[6]);buf[7]=sigmoid(buf[7]);
    buf[0]=mat4(vec4(1.6794263,1.3817469,2.9625452,0.),vec4(-1.8834411,-1.4806935,-3.5924516,0.),vec4(-1.3279216,-1.0918057,-2.3124623,0.),vec4(0.2662234,0.23235129,0.44178495,0.))*buf[0]+mat4(vec4(-0.6299101,-0.5945583,-0.9125601,0.),vec4(0.17828953,0.18300213,0.18182953,0.),vec4(-2.96544,-2.5819945,-4.9001055,0.),vec4(1.4195864,1.1868085,2.5176322,0.))*buf[1]+mat4(vec4(-1.2584374,-1.0552157,-2.1688404,0.),vec4(-0.7200217,-0.52666044,-1.438251,0.),vec4(0.15345335,0.15196142,0.272854,0.),vec4(0.945728,0.8861938,1.2766753,0.))*buf[2]+mat4(vec4(-2.4218085,-1.968602,-4.35166,0.),vec4(-22.683098,-18.0544,-41.954372,0.),vec4(0.63792,0.5470648,1.1078634,0.),vec4(-1.5489894,-1.3075932,-2.6444845,0.))*buf[3]+mat4(vec4(-0.49252132,-0.39877754,-0.91366625,0.),vec4(0.95609266,0.7923952,1.640221,0.),vec4(0.30616966,0.15693925,0.8639857,0.),vec4(1.1825981,0.94504964,2.176963,0.))*buf[4]+mat4(vec4(0.35446745,0.3293795,0.59547555,0.),vec4(-0.58784515,-0.48177817,-1.0614829,0.),vec4(2.5271258,1.9991658,4.6846647,0.),vec4(0.13042648,0.08864098,0.30187556,0.))*buf[5]+mat4(vec4(-1.7718065,-1.4033192,-3.3355875,0.),vec4(3.1664357,2.638297,5.378702,0.),vec4(-3.1724713,-2.6107926,-5.549295,0.),vec4(-2.851368,-2.249092,-5.3013067,0.))*buf[6]+mat4(vec4(1.5203838,1.2212278,2.8404984,0.),vec4(1.5210563,1.2651345,2.683903,0.),vec4(2.9789467,2.4364579,5.2347264,0.),vec4(2.2270417,1.8825914,3.8028636,0.))*buf[7]+vec4(-1.5468478,-3.6171484,0.24762098,0.);
    buf[0]=sigmoid(buf[0]);
    return vec4(buf[0].x,buf[0].y,buf[0].z,1.);
}

void mainImage(out vec4 fragColor,in vec2 fragCoord){
    vec2 uv=fragCoord/uResolution.xy*2.-1.;
    uv.y*=-1.;
    uv+=uWarp*vec2(sin(uv.y*6.283+uTime*0.5),cos(uv.x*6.283+uTime*0.5))*0.05;
    fragColor=cppn_fn(uv,0.1*sin(0.3*uTime),0.1*sin(0.69*uTime),0.1*sin(0.44*uTime));
}

void main(){
    vec4 col;mainImage(col,gl_FragCoord.xy);
    col.rgb=hueShiftRGB(col.rgb,uHueShift);
    float scanline_val=sin(gl_FragCoord.y*uScanFreq)*0.5+0.5;
    col.rgb*=1.-(scanline_val*scanline_val)*uScan;
    col.rgb+=(rand(gl_FragCoord.xy+uTime)-0.5)*uNoise;
    gl_FragColor=vec4(clamp(col.rgb,0.0,1.0),1.0);
}
`;function Fr({hueShift:t=0,noiseIntensity:e=0,scanlineIntensity:s=0,speed:i=.5,scanlineFrequency:n=0,warpAmount:r=0,resolutionScale:a=1}){const u=y.useRef(null);return y.useEffect(()=>{const l=u.current,o=l.parentElement,h=new gn({dpr:Math.min(window.devicePixelRatio,2),canvas:l}),d=h.gl,f=new Rr(d),p=new cn(d,{vertex:_r,fragment:Mr,uniforms:{uTime:{value:0},uResolution:{value:new ke},uHueShift:{value:t},uNoise:{value:e},uScan:{value:s},uScanFreq:{value:n},uWarp:{value:r}}}),g=new dr(d,{geometry:f,program:p}),m=()=>{const b=o.clientWidth,j=o.clientHeight;h.setSize(b*a,j*a),p.uniforms.uResolution.value.set(b,j)};window.addEventListener("resize",m),m();const x=performance.now();let v=0;const E=()=>{p.uniforms.uTime.value=(performance.now()-x)/1e3*i,p.uniforms.uHueShift.value=t,p.uniforms.uNoise.value=e,p.uniforms.uScan.value=s,p.uniforms.uScanFreq.value=n,p.uniforms.uWarp.value=r,h.render({scene:g}),v=requestAnimationFrame(E)};return E(),()=>{cancelAnimationFrame(v),window.removeEventListener("resize",m)}},[t,e,s,i,n,r,a]),c.jsx("canvas",{ref:u,className:"darkveil-canvas"})}var Ir=function(t,e,s,i){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{o(i.next(h))}catch(d){a(d)}}function l(h){try{o(i.throw(h))}catch(d){a(d)}}function o(h){h.done?r(h.value):n(h.value).then(u,l)}o((i=i.apply(t,e||[])).next())})};const{Title:Br}=K,zr=()=>{const[t,e]=y.useState(!1),[s,i]=y.useState(!1),{login:n}=V(),r=ae(),a=u=>Ir(void 0,void 0,void 0,function*(){e(!0);try{(yield n(u))?(R.success("Успешная авторизация"),r("/dashboard")):R.error("Неверное имя пользователя или пароль")}catch{R.error("Ошибка авторизации")}finally{e(!1)}});return y.useEffect(()=>{const u=setTimeout(()=>i(!0),100);return()=>clearTimeout(u)},[]),c.jsxs("div",Object.assign({style:{width:"100%",height:"100vh",position:"relative",background:"#0c1018"}},{children:[c.jsx(Fr,{}),c.jsx("div",Object.assign({style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"none"}},{children:c.jsxs(M,Object.assign({style:{width:420,borderRadius:12,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"rgba(20,28,38,0.85)",pointerEvents:"all",opacity:s?1:0,transform:s?"translateY(0px)":"translateY(-20px)",transition:"opacity 0.5s ease, transform 0.5s ease",color:"#fff"}},{children:[c.jsxs("div",Object.assign({style:{textAlign:"center",marginBottom:24}},{children:[c.jsx(Br,Object.assign({level:2,style:{color:"#fff"}},{children:"QA Payments"})),c.jsx("p",Object.assign({style:{color:"#ccc"}},{children:"Войдите в свою учетную запись"}))]})),c.jsxs(_,Object.assign({name:"auth",onFinish:a,autoComplete:"off"},{children:[c.jsx(_.Item,Object.assign({name:"username",rules:[{required:!0,message:"Пожалуйста, введите имя пользователя!"}]},{children:c.jsx(q,{className:"input-dark",prefix:c.jsx(W,{style:{color:"#fff"}}),placeholder:"Имя пользователя",size:"large",style:{background:"rgba(255,255,255,0.05)",color:"#fff",border:"none"}})})),c.jsx(_.Item,Object.assign({name:"password",rules:[{required:!0,message:"Пожалуйста, введите пароль!"}]},{children:c.jsx(q,{className:"input-dark",prefix:c.jsx(fe,{style:{color:"#fff"}}),type:"password",placeholder:"Пароль",size:"large",style:{background:"rgba(255,255,255,0.05)",color:"#fff",border:"none"}})})),c.jsx(_.Item,{children:c.jsx($,Object.assign({type:"primary",htmlType:"submit",loading:t,block:!0,size:"large",style:{background:"#1f6f9b",borderColor:"#1f6f9b",fontWeight:600,color:"#fff"}},{children:"Войти"}))})]})),c.jsxs("div",Object.assign({style:{textAlign:"center",marginTop:16}},{children:[c.jsx("p",Object.assign({style:{color:"#ccc"}},{children:c.jsx("strong",{children:"Демо учетные данные:"})})),c.jsx("p",Object.assign({style:{color:"#ccc"}},{children:"Администратор: admin / password"})),c.jsx("p",Object.assign({style:{color:"#ccc"}},{children:"Пользователь: user / password"}))]}))]}))}))]}))},{Title:ce,Text:oe}=K,he={totalTests:1247,passedTests:987,failedTests:42,runningTests:18},Dr=()=>{const{user:t}=V();return c.jsxs("div",{children:[c.jsx(M,Object.assign({style:{marginBottom:24}},{children:c.jsxs("div",Object.assign({style:{display:"flex",alignItems:"center"}},{children:[c.jsx(ye,{size:64,src:t==null?void 0:t.avatar,icon:c.jsx(W,{}),style:{marginRight:16}}),c.jsxs("div",{children:[c.jsxs(ce,Object.assign({level:3,style:{margin:0}},{children:["Рад видеть вас снова, ",t==null?void 0:t.username,"!"]})),c.jsx(oe,Object.assign({type:"secondary"},{children:"Статистика по автотестам"}))]})]}))})),c.jsxs(Z,Object.assign({gutter:[16,16],style:{marginBottom:24}},{children:[c.jsx(P,Object.assign({xs:24,sm:12,lg:6},{children:c.jsx(M,{children:c.jsx(ue,{title:"Всего тестов",value:he.totalTests,prefix:c.jsx(U,{}),valueStyle:{color:"#3f8600"}})})})),c.jsx(P,Object.assign({xs:24,sm:12,lg:6},{children:c.jsx(M,{children:c.jsx(ue,{title:"Пройдено",value:he.passedTests,prefix:c.jsx(St,{}),valueStyle:{color:"#3f8600"}})})})),c.jsx(P,Object.assign({xs:24,sm:12,lg:6},{children:c.jsx(M,{children:c.jsx(ue,{title:"Провалено",value:he.failedTests,prefix:c.jsx(Ot,{}),valueStyle:{color:"#cf1322"}})})})),c.jsx(P,Object.assign({xs:24,sm:12,lg:6},{children:c.jsx(M,{children:c.jsx(ue,{title:"Выполняется",value:he.runningTests,prefix:c.jsx(Ct,{spin:!0}),valueStyle:{color:"#1890ff"}})})}))]})),c.jsxs(Z,Object.assign({gutter:[16,16],style:{marginBottom:24}},{children:[c.jsx(P,Object.assign({xs:24,lg:16},{children:c.jsx(M,Object.assign({title:"Результаты тестов по дням",extra:c.jsx(U,{style:{color:"#1890ff"}})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(U,{style:{fontSize:48,color:"#1890ff"}}),c.jsxs("div",{children:[c.jsx(ce,Object.assign({level:4,style:{margin:0}},{children:"График результатов тестов"})),c.jsx(oe,Object.assign({type:"secondary"},{children:"Столбчатая диаграмма с результатами тестов по дням"}))]})]}))}))}))})),c.jsx(P,Object.assign({xs:24,lg:8},{children:c.jsx(M,Object.assign({title:"Статусы тестов",extra:c.jsx(pe,{style:{color:"#ff4d4f"}})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(pe,{style:{fontSize:48,color:"#ff4d4f"}}),c.jsxs("div",{children:[c.jsx(ce,Object.assign({level:4,style:{margin:0}},{children:"Распределение статусов"})),c.jsx(oe,Object.assign({type:"secondary"},{children:"Круговая диаграмма с распределением статусов тестов"}))]})]}))}))}))}))]})),c.jsx(Z,Object.assign({gutter:[16,16]},{children:c.jsx(P,Object.assign({xs:24},{children:c.jsx(M,Object.assign({title:"Динамика тестов",extra:c.jsx(me,{style:{color:"#52c41a"}})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(me,{style:{fontSize:48,color:"#52c41a"}}),c.jsxs("div",{children:[c.jsx(ce,Object.assign({level:4,style:{margin:0}},{children:"Динамика прохождения тестов"})),c.jsx(oe,Object.assign({type:"secondary"},{children:"Линейный график с динамикой прохождения тестов"}))]})]}))}))}))}))}))]})},{Title:de,Text:N}=K,kr=[{id:"at-bk",name:"AT: BK",status:"completed",progress:100,tests:124,failed:2},{id:"at-pb",name:"AT: PB",status:"running",progress:65,tests:89,failed:1},{id:"at-nyse",name:"AT: NYSE",status:"stopped",progress:0,tests:0,failed:0},{id:"at-lse",name:"AT: LSE",status:"error",progress:30,tests:56,failed:5},{id:"at-tse",name:"AT: TSE",status:"completed",progress:100,tests:78,failed:0},{id:"at-fwb",name:"AT: FWB",status:"completed",progress:100,tests:92,failed:3}],Pr=t=>{switch(t){case"completed":return{color:"success",text:"Завершено",icon:c.jsx(U,{})};case"running":return{color:"processing",text:"Выполняется",icon:c.jsx(Rt,{spin:!0})};case"stopped":return{color:"default",text:"Остановлено",icon:c.jsx(Tt,{})};case"error":return{color:"error",text:"Ошибки",icon:c.jsx(U,{})};default:return{color:"default",text:"Неизвестно",icon:null}}},Lr=()=>{const[t,e]=y.useState(kr),s=n=>{const r=t.find(a=>a.id===n);r&&r.status!=="running"?(e(a=>a.map(u=>u.id===n?Object.assign(Object.assign({},u),{status:"running",progress:0}):u)),R.success(`Запущены тесты для ${r.name}`)):R.warning("Тесты уже выполняются для этого рынка")},i=n=>{const r=t.find(a=>a.id===n);r&&r.status==="running"?(e(a=>a.map(u=>u.id===n?Object.assign(Object.assign({},u),{status:"stopped",progress:0}):u)),R.success(`Остановлены тесты для ${r.name}`)):R.warning("Нет активных тестов для остановки")};return c.jsxs("div",{children:[c.jsx(de,Object.assign({level:2},{children:"Автотесты и запуск"})),c.jsx(Z,Object.assign({gutter:[16,16],style:{marginBottom:24}},{children:t.map(n=>{const r=Pr(n.status);return c.jsx(P,Object.assign({xs:24,sm:12,lg:8},{children:c.jsx(M,Object.assign({title:c.jsxs(k,{children:[r.icon,c.jsx("span",{children:n.name})]}),extra:c.jsx(At,Object.assign({color:r.color},{children:r.text})),actions:[c.jsx($,Object.assign({type:"primary",icon:c.jsx(ss,{}),onClick:()=>s(n.id),disabled:n.status==="running"},{children:"Запустить"}),"start"),c.jsx($,Object.assign({danger:!0,icon:c.jsx(Tt,{}),onClick:()=>i(n.id),disabled:n.status!=="running"},{children:"Остановить"}),"stop")]},{children:c.jsxs(k,Object.assign({direction:"vertical",style:{width:"100%"}},{children:[c.jsxs("div",{children:[c.jsx(N,Object.assign({strong:!0},{children:"Прогресс: "})),c.jsx(is,{percent:n.progress,status:n.status==="error"?"exception":"normal"})]}),c.jsxs("div",{children:[c.jsx(N,Object.assign({strong:!0},{children:"Тестов: "})),c.jsx(N,{children:n.tests})]}),c.jsxs("div",{children:[c.jsx(N,Object.assign({strong:!0},{children:"Провалено: "})),c.jsx(N,Object.assign({type:"danger"},{children:n.failed}))]})]}))}))}),n.id)})})),c.jsxs(Z,Object.assign({gutter:[16,16]},{children:[c.jsx(P,Object.assign({xs:24,lg:12},{children:c.jsx(M,Object.assign({title:"Статистика запусков",extra:c.jsx(U,{})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(U,{style:{fontSize:48,color:"#1890ff"}}),c.jsxs("div",{children:[c.jsx(de,Object.assign({level:4,style:{margin:0}},{children:"График запусков тестов по рынкам"})),c.jsx(N,Object.assign({type:"secondary"},{children:"Столбчатая диаграмма с количеством запусков по рынкам"}))]})]}))}))}))})),c.jsx(P,Object.assign({xs:24,lg:12},{children:c.jsx(M,Object.assign({title:"Частота падений",extra:c.jsx(pe,{})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(pe,{style:{fontSize:48,color:"#ff4d4f"}}),c.jsxs("div",{children:[c.jsx(de,Object.assign({level:4,style:{margin:0}},{children:"Диаграмма частоты падений тестов"})),c.jsx(N,Object.assign({type:"secondary"},{children:"Круговая диаграмма с частотой падений тестов"}))]})]}))}))}))}))]})),c.jsx(Z,Object.assign({gutter:[16,16],style:{marginTop:24}},{children:c.jsx(P,Object.assign({xs:24},{children:c.jsx(M,Object.assign({title:"Динамика тестов",extra:c.jsx(me,{})},{children:c.jsx("div",Object.assign({style:{textAlign:"center",padding:"40px 0"}},{children:c.jsxs(k,Object.assign({direction:"vertical",size:"large"},{children:[c.jsx(me,{style:{fontSize:48,color:"#52c41a"}}),c.jsxs("div",{children:[c.jsx(de,Object.assign({level:4,style:{margin:0}},{children:"График общей динамики прохождения тестов"})),c.jsx(N,Object.assign({type:"secondary"},{children:"Линейный график с динамикой прохождения тестов"}))]})]}))}))}))}))}))]})},$r=[{id:"market-1",name:"AT: BK",code:"BK"},{id:"market-2",name:"AT: PB",code:"PB"},{id:"market-3",name:"AT: NYSE",code:"NYSE"},{id:"market-4",name:"AT: LSE",code:"LSE"},{id:"market-5",name:"AT: TSE",code:"TSE"},{id:"market-6",name:"AT: FWB",code:"FWB"}],Nr=[{id:"run-1",marketId:"market-1",status:"completed",progress:100,totalTests:124,passedTests:122,failedTests:2,startTime:"2023-07-15T10:00:00Z",endTime:"2023-07-15T10:15:00Z"},{id:"run-2",marketId:"market-2",status:"running",progress:65,totalTests:89,passedTests:58,failedTests:1,startTime:"2023-07-15T10:30:00Z"},{id:"run-3",marketId:"market-4",status:"failed",progress:30,totalTests:56,passedTests:12,failedTests:5,startTime:"2023-07-15T09:45:00Z",endTime:"2023-07-15T10:05:00Z"}],qr=[{id:"result-1",testRunId:"run-1",testName:"LoginTest",expected:"Success",actual:"Success",status:"passed",timestamp:"2023-07-15T10:01:00Z"},{id:"result-2",testRunId:"run-1",testName:"PortfolioTest",expected:"Success",actual:"Failed",status:"failed",errorMessage:"Timeout exceeded",timestamp:"2023-07-15T10:02:30Z"},{id:"result-3",testRunId:"run-2",testName:"OrderTest",expected:"Success",actual:"Success",status:"passed",timestamp:"2023-07-15T10:31:15Z"},{id:"result-4",testRunId:"run-2",testName:"MarginTest",expected:"Success",actual:"Running",status:"running",timestamp:"2023-07-15T10:40:30Z"}],Ur=()=>{const t=ze(),{markets:e,testRuns:s,testResults:i,loading:n,error:r}=De(o=>o.autotests);return y.useEffect(()=>{t(Us($r)),t(We(Nr)),t(Ve(qr))},[t]),y.useEffect(()=>{const o=localStorage.getItem("testRuns"),h=localStorage.getItem("testResults");if(o)try{const d=JSON.parse(o);t(We(d))}catch(d){console.error("Ошибка при парсинге testRuns из localStorage",d)}if(h)try{const d=JSON.parse(h);t(Ve(d))}catch(d){console.error("Ошибка при парсинге testResults из localStorage",d)}},[t]),y.useEffect(()=>{localStorage.setItem("testRuns",JSON.stringify(s))},[s]),y.useEffect(()=>{localStorage.setItem("testResults",JSON.stringify(i))},[i]),{markets:e,testRuns:s,testResults:i,loading:n,error:r,startTestRun:o=>{if(s.find(f=>f.marketId===o&&f.status==="running"))return;const d={id:`run-${Date.now()}`,marketId:o,status:"running",progress:0,totalTests:Math.floor(Math.random()*100)+50,passedTests:0,failedTests:0,startTime:new Date().toISOString()};t(Ws(d))},stopTestRun:o=>{const h=s.find(d=>d.id===o);h&&t(Vs(Object.assign(Object.assign({},h),{status:"stopped",endTime:new Date().toISOString()})))},rerunTest:o=>{const h=i.find(d=>d.id===o);h&&h.status!=="running"&&(t(Ge(Object.assign(Object.assign({},h),{status:"running",actual:"Running"}))),setTimeout(()=>{const d=Math.random()>.3;t(Ge(Object.assign(Object.assign({},h),{status:d?"passed":"failed",actual:d?"Success":"Failed",errorMessage:d?void 0:"Test failed due to timeout"})))},3e3))}}},{Title:Wr,Text:f0}=K,jt=t=>{switch(t){case"passed":return{color:"success",text:"Пройден",icon:c.jsx(St,{})};case"failed":return{color:"error",text:"Провален",icon:c.jsx(rs,{})};case"running":return{color:"processing",text:"Выполняется",icon:c.jsx(Ct,{spin:!0})};default:return{color:"default",text:"Неизвестно",icon:null}}},Vr=()=>{const{markets:t,testResults:e,rerunTest:s}=Ur(),i=a=>{const u=e.find(l=>l.id===a);if(u){if(u.status==="running"){R.warning("Тест уже выполняется");return}s(a),R.success(`Перезапущен тест: ${u.testName}`)}},n=a=>{const u=t.find(l=>l.id===a);return u?u.name:a},r=[{title:"Рынок",dataIndex:"marketId",key:"marketId",render:a=>n(a)},{title:"Название теста",dataIndex:"testName",key:"testName"},{title:"Ожидаемый результат",dataIndex:"expected",key:"expected"},{title:"Фактический результат",dataIndex:"actual",key:"actual",render:(a,u)=>{const l=jt(u.status);return c.jsxs(k,{children:[l.icon,c.jsx("span",{children:a})]})}},{title:"Статус",dataIndex:"status",key:"status",render:a=>{const u=jt(a);return c.jsx(At,Object.assign({color:u.color,icon:u.icon,className:a==="running"?"status-tag processing":"status-tag"},{children:u.text}))}},{title:"Время запуска",dataIndex:"timestamp",key:"timestamp",render:a=>new Date(a).toLocaleString()},{title:"Действия",key:"actions",render:(a,u)=>c.jsx($,Object.assign({type:"primary",icon:c.jsx(Rt,{}),onClick:()=>i(u.id),disabled:u.status==="running",size:"small"},{children:"Перезапустить"}))}];return c.jsxs("div",{children:[c.jsx(Wr,Object.assign({level:2},{children:"Результаты автотестов"})),c.jsx(M,{children:c.jsx(ns,{dataSource:e,columns:r,pagination:{pageSize:10},rowKey:"id"})})]})};var Gr=function(t,e,s,i){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{o(i.next(h))}catch(d){a(d)}}function l(h){try{o(i.throw(h))}catch(d){a(d)}}function o(h){h.done?r(h.value):n(h.value).then(u,l)}o((i=i.apply(t,e||[])).next())})};const{Title:Xr,Text:Yr}=K,{Option:Zr}=_t,Kr=[{id:"at-bk",name:"AT: BK"},{id:"at-pb",name:"AT: PB"},{id:"at-nyse",name:"AT: NYSE"},{id:"at-lse",name:"AT: LSE"},{id:"at-tse",name:"AT: TSE"},{id:"at-fwb",name:"AT: FWB"}],Jr=()=>{const[t]=_.useForm(),[e,s]=y.useState(!1),[i,n]=y.useState(null),r=u=>Gr(void 0,void 0,void 0,function*(){s(!0),n(null);try{if(!u.market)throw new Error("Пожалуйста, выберите рынок");if(!u.transactionId||u.transactionId.trim()==="")throw new Error("Пожалуйста, введите номер транзакции");if(yield new Promise(l=>setTimeout(l,1500)),Math.random()<.3)throw new Error("Ошибка сервера. Пожалуйста, попробуйте позже.");R.success("Коллбэк успешно отправлен"),t.resetFields()}catch(l){const o=l instanceof Error?l.message:"Произошла неизвестная ошибка";n(o),R.error(o)}finally{s(!1)}}),a=()=>{R.error("Пожалуйста, заполните все обязательные поля")};return c.jsxs("div",{children:[c.jsx(Xr,Object.assign({level:2},{children:"Отправить коллбэк"})),c.jsx(M,{children:c.jsxs(_,Object.assign({form:t,name:"callback",onFinish:r,onFinishFailed:a,layout:"vertical"},{children:[c.jsx(_.Item,Object.assign({label:"Рынок",name:"market",rules:[{required:!0,message:"Пожалуйста, выберите рынок!"}]},{children:c.jsx(_t,Object.assign({placeholder:"Выберите рынок",size:"large"},{children:Kr.map(u=>c.jsx(Zr,Object.assign({value:u.id},{children:u.name}),u.id))}))})),c.jsx(_.Item,Object.assign({label:"Номер транзакции",name:"transactionId",rules:[{required:!0,message:"Пожалуйста, введите номер транзакции!"},{pattern:/^\d+$/,message:"Номер транзакции должен содержать только цифры"}]},{children:c.jsx(q,{placeholder:"Введите номер транзакции",size:"large"})})),i&&c.jsx("div",Object.assign({style:{background:"#fff2f0",border:"1px solid #ffccc7",padding:12,borderRadius:4,marginBottom:16}},{children:c.jsxs(k,{children:[c.jsx(as,{style:{color:"#ff4d4f"}}),c.jsx(Yr,Object.assign({type:"danger"},{children:i}))]})})),c.jsx(_.Item,{children:c.jsx($,Object.assign({type:"primary",htmlType:"submit",loading:e,icon:c.jsx(Mt,{}),size:"large"},{children:"Отправить коллбэк"}))})]}))})]})};var Et=function(t,e,s,i){function n(r){return r instanceof s?r:new s(function(a){a(r)})}return new(s||(s=Promise))(function(r,a){function u(h){try{o(i.next(h))}catch(d){a(d)}}function l(h){try{o(i.throw(h))}catch(d){a(d)}}function o(h){h.done?r(h.value):n(h.value).then(u,l)}o((i=i.apply(t,e||[])).next())})};const{Title:Qr}=K,Hr=()=>{const{user:t}=V(),[e,s]=y.useState(!1),[i,n]=y.useState((t==null?void 0:t.avatar)||"");ae();const r=l=>Et(void 0,void 0,void 0,function*(){s(!0);try{yield new Promise(o=>setTimeout(o,1e3)),R.success("Профиль успешно обновлен")}catch{R.error("Ошибка обновления профиля")}finally{s(!1)}}),a=l=>Et(void 0,void 0,void 0,function*(){if(l.newPassword!==l.confirmNewPassword){R.error("Пароли не совпадают");return}s(!0);try{yield new Promise(o=>setTimeout(o,1e3)),R.success("Пароль успешно изменен")}catch{R.error("Ошибка изменения пароля")}finally{s(!1)}}),u=l=>{l.file.status==="done"?(n("https://api.dicebear.com/7.x/miniavs/svg?seed="+Math.floor(Math.random()*100)),R.success("Аватар успешно загружен")):l.file.status==="error"&&R.error("Ошибка загрузки аватара")};return c.jsxs("div",{children:[c.jsx(Qr,Object.assign({level:2},{children:"Настройки аккаунта"})),c.jsx(M,{children:c.jsxs(k,Object.assign({align:"start",style:{marginBottom:24}},{children:[c.jsx(ye,{size:100,src:i,icon:c.jsx(W,{})}),c.jsxs("div",{children:[c.jsx(us,Object.assign({showUploadList:!1,beforeUpload:()=>!1,onChange:u},{children:c.jsx($,Object.assign({icon:c.jsx(ls,{})},{children:"Изменить аватар"}))})),c.jsx("p",Object.assign({style:{marginTop:8,color:"#888"}},{children:"JPG, PNG или GIF, макс. 2MB"}))]})]}))}),c.jsx(M,Object.assign({title:"Информация профиля",style:{marginTop:24}},{children:c.jsxs(_,Object.assign({name:"profile",onFinish:r,layout:"vertical",initialValues:{username:t==null?void 0:t.username,email:t==null?void 0:t.email}},{children:[c.jsx(_.Item,Object.assign({label:"Имя пользователя",name:"username",rules:[{required:!0,message:"Пожалуйста, введите имя пользователя!"}]},{children:c.jsx(q,{prefix:c.jsx(W,{}),size:"large"})})),c.jsx(_.Item,Object.assign({label:"Email",name:"email",rules:[{required:!0,message:"Пожалуйста, введите email!"},{type:"email",message:"Пожалуйста, введите корректный email!"}]},{children:c.jsx(q,{size:"large"})})),c.jsx(_.Item,{children:c.jsx($,Object.assign({type:"primary",htmlType:"submit",loading:e,icon:c.jsx(Pe,{}),size:"large"},{children:"Сохранить изменения"}))})]}))})),c.jsx(M,Object.assign({title:"Изменение пароля",style:{marginTop:24}},{children:c.jsxs(_,Object.assign({name:"password",onFinish:a,layout:"vertical"},{children:[c.jsx(_.Item,Object.assign({label:"Текущий пароль",name:"oldPassword",rules:[{required:!0,message:"Пожалуйста, введите текущий пароль!"}]},{children:c.jsx(q.Password,{prefix:c.jsx(fe,{}),size:"large"})})),c.jsx(_.Item,Object.assign({label:"Новый пароль",name:"newPassword",rules:[{required:!0,message:"Пожалуйста, введите новый пароль!"}]},{children:c.jsx(q.Password,{prefix:c.jsx(fe,{}),size:"large"})})),c.jsx(_.Item,Object.assign({label:"Подтвердите новый пароль",name:"confirmNewPassword",rules:[{required:!0,message:"Пожалуйста, подтвердите новый пароль!"}]},{children:c.jsx(q.Password,{prefix:c.jsx(fe,{}),size:"large"})})),c.jsx(_.Item,{children:c.jsx($,Object.assign({type:"primary",htmlType:"submit",loading:e,icon:c.jsx(Pe,{}),size:"large"},{children:"Изменить пароль"}))})]}))}))]})},H=({children:t,allowedRoles:e})=>{const{isAuth:s,user:i}=V();return s?e&&i&&!e.includes(i.role)?c.jsxs("div",Object.assign({style:{padding:24,textAlign:"center"}},{children:[c.jsx("h2",{children:"Доступ запрещен"}),c.jsx("p",{children:"У вас нет прав для просмотра этой страницы."})]})):c.jsx(c.Fragment,{children:t}):c.jsx(ge,{to:"/auth",replace:!0})},e0=()=>c.jsxs("div",Object.assign({style:{padding:24,textAlign:"center"}},{children:[c.jsx("h2",{children:"Страница не найдена"}),c.jsx("p",{children:"Запрашиваемая страница не существует."})]})),wt=({isAuth:t})=>(V(),wi([{path:"/",element:t?c.jsx(ge,{to:"/dashboard"}):c.jsx(ge,{to:"/auth"})},{path:"/auth",element:t?c.jsx(ge,{to:"/dashboard"}):c.jsx(zr,{})},{path:"/dashboard",element:c.jsx(H,{children:c.jsx(Dr,{})})},{path:"/autotests",element:c.jsx(H,Object.assign({allowedRoles:["admin"]},{children:c.jsx(Lr,{})}))},{path:"/test-results",element:c.jsx(H,Object.assign({allowedRoles:["admin"]},{children:c.jsx(Vr,{})}))},{path:"/callback",element:c.jsx(H,Object.assign({allowedRoles:["admin","user"]},{children:c.jsx(Jr,{})}))},{path:"/account",element:c.jsx(H,Object.assign({allowedRoles:["admin","user"]},{children:c.jsx(Hr,{})}))},{path:"*",element:c.jsx(e0,{})}])),{Sider:t0}=te,s0=[{key:"/dashboard",icon:c.jsx(cs,{}),label:"Дашборд",path:"/dashboard",roles:["admin","user"]},{key:"/autotests",icon:c.jsx(Ot,{}),label:"Автотесты",path:"/autotests",roles:["admin"]},{key:"/test-results",icon:c.jsx(U,{}),label:"Результаты тестов",path:"/test-results",roles:["admin"]},{key:"/callback",icon:c.jsx(Mt,{}),label:"Отправить коллбэк",path:"/callback",roles:["admin","user"]},{key:"/account",icon:c.jsx(W,{}),label:"Аккаунт",path:"/account",roles:["admin","user"]}],i0=({collapsed:t,setCollapsed:e})=>{var s;const i=ae(),n=be(),{user:r}=V(),a=()=>e(!t),u=s0.filter(g=>r&&g.roles.includes(r.role)),l=u.findIndex(g=>g.path==="/account"),o=l!==-1?u[l]:null,h=u.filter(g=>g.path!=="/account"),d=((s=u.find(g=>n.pathname===g.path||n.pathname.startsWith(g.path+"/")))===null||s===void 0?void 0:s.path)||void 0,f=({key:g})=>{i(String(g))},p=()=>{o&&i(o.path)};return c.jsxs(t0,Object.assign({trigger:null,collapsible:!0,collapsed:t,collapsedWidth:64,width:250,style:{display:"flex",flexDirection:"column",height:"100vh",position:"fixed",left:0,top:0,bottom:0,zIndex:100,background:"#0b1b2b",boxShadow:"2px 0 8px rgba(0,0,0,0.15)",transition:"width 0.3s ease"}},{children:[c.jsxs("div",Object.assign({style:{height:64,display:"flex",alignItems:"center",justifyContent:t?"center":"space-between",padding:"0 12px",transition:"all 0.3s ease"}},{children:[!t&&c.jsx("div",Object.assign({style:{color:"white",fontWeight:700,fontSize:18,opacity:t?0:1,transition:"opacity 0.3s ease"}},{children:"QA Payments"})),c.jsx($,{type:"primary",onClick:a,"aria-label":t?"Развернуть меню":"Свернуть меню",style:{height:40,minWidth:40,padding:0,borderRadius:8,background:"#1f6f9b",borderColor:"#1f6f9b",boxShadow:"0 1px 0 rgba(0,0,0,0.12)",display:"flex",alignItems:"center",justifyContent:"center"},icon:t?c.jsx(os,{style:{fontSize:16,color:"white"}}):c.jsx(hs,{style:{fontSize:16,color:"white"}})})]})),c.jsx("div",Object.assign({style:{flex:1,overflow:"auto",padding:"8px 8px 0 8px"}},{children:c.jsx(ds,{theme:"dark",mode:"inline",selectedKeys:d?[d]:[],onClick:f,items:h.map(g=>({key:g.path,icon:g.icon,label:g.label,style:{fontSize:16,fontWeight:600,paddingLeft:12}})),style:{background:"transparent",border:"none",color:"#e6f7ff",paddingTop:8,lineHeight:"40px",userSelect:"none"}})})),o&&c.jsx("div",Object.assign({style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.04)",display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start"}},{children:c.jsxs("div",Object.assign({role:"button",tabIndex:0,onClick:p,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),p())},"aria-label":"Перейти в аккаунт",style:{height:48,width:t?48:"100%",maxWidth:220,padding:t?0:"0 12px",borderRadius:8,background:d===o.path?"rgba(30,144,255,0.12)":"transparent",display:"flex",alignItems:"center",justifyContent:t?"center":"flex-start",gap:12,cursor:"pointer",transition:"all 0.3s ease",outline:"none",userSelect:"none"},onMouseEnter:g=>{!t&&d!==o.path&&(g.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:g=>{!t&&d!==o.path&&(g.currentTarget.style.background="transparent")}},{children:[c.jsx("div",Object.assign({style:{flexShrink:0,width:40,height:40,borderRadius:"50%",overflow:"hidden",border:"2px solid #1f6f9b",background:"#17364a"}},{children:c.jsx(ye,{src:r==null?void 0:r.avatar,icon:c.jsx(W,{}),size:40,style:{width:"100%",height:"100%",display:"block"},shape:"circle"})})),!t&&c.jsx("span",Object.assign({style:{color:"#e6f7ff",fontWeight:600,fontSize:16,whiteSpace:"nowrap"}},{children:o.label}))]}))}))]}))},{Header:n0}=te,r0=()=>{const{user:t,logout:e}=V(),{isDarkTheme:s,toggleTheme:i}=Xt(),n=ae(),u={items:[{key:"/account",icon:c.jsx(W,{}),label:"Профиль"},{key:"/settings",icon:c.jsx(fs,{}),label:"Настройки"},{type:"divider"},{key:"/logout",icon:c.jsx(gs,{}),label:"Выйти"}],onClick:l=>{const{key:o}=l,h=String(o);if(h==="/logout"){e();return}n(h)}};return c.jsxs(n0,Object.assign({style:{padding:"0 20px",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:99,height:64,background:s?"#001529":"#ffffff",borderBottom:"1px solid rgba(0,0,0,0.06)"}},{children:[c.jsxs("div",Object.assign({style:{display:"flex",alignItems:"center",gap:16}},{children:[c.jsx("div",Object.assign({style:{width:40,height:40,borderRadius:8,background:"#d915f3ff",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700}},{children:"QA"})),c.jsx("div",Object.assign({style:{display:"flex",flexDirection:"column",lineHeight:1}},{children:c.jsx("div",Object.assign({style:{fontWeight:600,fontSize:28}},{children:"Autotest"}))}))]})),c.jsxs("div",Object.assign({style:{display:"flex",alignItems:"center",gap:12}},{children:[c.jsx(ps,Object.assign({title:"Уведомления"},{children:c.jsx($,{type:"text",icon:c.jsx(ms,{})})})),c.jsx(xs,{checked:s,onChange:i,checkedChildren:c.jsx(ys,{}),unCheckedChildren:c.jsx(vs,{})}),c.jsx(bs,Object.assign({menu:u,trigger:["click"]},{children:c.jsx(js,Object.assign({dot:!1},{children:c.jsxs(k,Object.assign({style:{cursor:"pointer",alignItems:"center"}},{children:[c.jsx(ye,{src:t==null?void 0:t.avatar,icon:c.jsx(W,{})}),c.jsxs("div",Object.assign({style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},{children:[c.jsx("div",Object.assign({style:{fontWeight:600}},{children:(t==null?void 0:t.username)||"Гость"})),c.jsx("div",Object.assign({style:{fontSize:12,color:"rgba(0,0,0,0.45)"}},{children:(t==null?void 0:t.role)||""}))]}))]}))}))}))]}))]}))},{Content:a0}=te,u0=({children:t})=>{const[e,s]=y.useState(!1);return c.jsxs(te,Object.assign({style:{minHeight:"100vh"}},{children:[c.jsx(i0,{collapsed:e,setCollapsed:s}),c.jsxs(te,Object.assign({className:e?"collapsed":"",style:{marginLeft:e?80:250,transition:"margin-left 0.2s"}},{children:[c.jsx(r0,{}),c.jsx(a0,Object.assign({style:{margin:"24px 16px 0",overflow:"initial",paddingTop:24}},{children:c.jsx("div",Object.assign({className:"main-content"},{children:t}))}))]}))]}))},l0=()=>{const{isDarkTheme:t}=Xt(),{isAuth:e}=V();return c.jsx(Es,Object.assign({theme:{algorithm:t?Le.darkAlgorithm:Le.defaultAlgorithm}},{children:c.jsx($i,{children:e?c.jsx(u0,{children:c.jsx(wt,{isAuth:e})}):c.jsx(wt,{isAuth:e})})}))},c0=Fs.createRoot(document.getElementById("root"));c0.render(c.jsx(ws.StrictMode,{children:c.jsx(Ts,{store:Xs,children:c.jsx(l0,{})})}));
